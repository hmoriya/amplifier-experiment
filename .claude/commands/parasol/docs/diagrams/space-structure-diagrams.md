# Parasol V5 Space Structure Diagrams

各領域（Space）の内部構造を視覚化したASCII図集です。

---

## 1. Value Space（価値領域）構造

### 1.1 Value Spaceの3軸モデル

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                        VALUE SPACE（価値領域）                               ┃
┃                         Phase 1-2 で設計                                     ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃                                                                              ┃
┃                    ┌─────────────────────────────┐                           ┃
┃                    │   WHY軸: Value Level (VL)   │                           ┃
┃                    │   「何を顧客に届けるか」     │                           ┃
┃                    │        【組織視点】          │                           ┃
┃                    └──────────────┬──────────────┘                           ┃
┃                                   │                                          ┃
┃              ┌────────────────────┼────────────────────┐                     ┃
┃              │                    │                    │                     ┃
┃              ▼                    │                    ▼                     ┃
┃  ┌───────────────────────┐        │        ┌───────────────────────┐         ┃
┃  │  HOW軸: Value Stream  │        │        │  WHEN軸: Value Stage  │         ┃
┃  │       (VStr)          │        │        │       (VS0-VS7)       │         ┃
┃  │「どう価値を流すか」    │        │        │「いつ価値を届けるか」  │         ┃
┃  │     【組織視点】       │        │        │    【顧客視点】        │         ┃
┃  └───────────────────────┘        │        └───────────────────────┘         ┃
┃              │                    │                    │                     ┃
┃              │                    │                    │                     ┃
┃              └────────────────────┴────────────────────┘                     ┃
┃                                   │                                          ┃
┃                                   ▼                                          ┃
┃                    ┌─────────────────────────────┐                           ┃
┃                    │  VL × VS マッピング         │                           ┃
┃                    │  （価値×ステージの交点）    │                           ┃
┃                    └─────────────────────────────┘                           ┃
┃                                                                              ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

### 1.2 WHY軸: Value Level 階層

```
┌────────────────────────────────────────────────────────────────────────────┐
│                     WHY軸: Value Level 階層分解                            │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│    VL1（最上位価値）                                                       │
│    ┌──────────────────────────────────────────────────────────────┐        │
│    │ 「健康的な生活を支援する」                                    │        │
│    │  ※企業ミッションレベルの価値                                 │        │
│    └──────────────────────────┬───────────────────────────────────┘        │
│                               │                                            │
│            ┌──────────────────┼──────────────────┐                         │
│            ▼                  ▼                  ▼                         │
│    VL2（価値グループ）                                                     │
│    ┌──────────────┐   ┌──────────────┐   ┌──────────────┐                  │
│    │  食事管理    │   │  運動支援    │   │  睡眠改善    │                  │
│    │              │   │              │   │              │                  │
│    └──────┬───────┘   └──────┬───────┘   └──────┬───────┘                  │
│           │                  │                  │                          │
│      ┌────┴────┐        ┌────┴────┐        ┌────┴────┐                     │
│      ▼         ▼        ▼         ▼        ▼         ▼                     │
│    VL3（詳細価値）= 実行可能粒度                                           │
│    ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐             │
│    │栄養計算 │ │食事記録 │ │運動記録 │ │目標設定 │ │睡眠分析 │ ...        │
│    │の可視化 │ │の自動化 │ │連携    │ │アドバイス│ │レポート │             │
│    └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘             │
│                                                                            │
│    ※VL3が「何を作るか」の起点となる                                       │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 1.3 WHEN軸: Value Stage（顧客状態遷移）

```
┌────────────────────────────────────────────────────────────────────────────┐
│                   WHEN軸: Value Stage（顧客ジャーニー）                    │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  【顧客の状態遷移】※主語は常に「顧客」                                    │
│                                                                            │
│  VS0        VS1        VS2        VS3        VS4        VS5        VS6     │
│ ┌───┐     ┌───┐     ┌───┐     ┌───┐     ┌───┐     ┌───┐     ┌───┐         │
│ │潜 │ ──▶ │認 │ ──▶ │選 │ ──▶ │決 │ ──▶ │獲 │ ──▶ │実 │ ──▶ │継 │ ──▶ VS7│
│ │在 │     │知 │     │好 │     │定 │     │得 │     │感 │     │続 │    共創 │
│ └───┘     └───┘     └───┘     └───┘     └───┘     └───┘     └───┘         │
│   │         │         │         │         │         │         │           │
│   ▼         ▼         ▼         ▼         ▼         ▼         ▼           │
│ ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐             │
│ │顧客が│  │顧客が│  │顧客が│  │顧客が│  │顧客が│  │顧客が│  │顧客が│             │
│ │潜在的│  │価値を│  │選びた│  │購入を│  │価値を│  │価値を│  │継続的│             │
│ │に課題│  │認識  │  │いと  │  │決定  │  │獲得  │  │実感  │  │に利用│             │
│ │を持つ│  │する  │  │思う  │  │する  │  │する  │  │する  │  │する  │             │
│ └─────┘  └─────┘  └─────┘  └─────┘  └─────┘  └─────┘  └─────┘             │
│                                                                            │
│  ────────────────────────────────────────────────────────────────▶        │
│                        時間軸（顧客ジャーニー）                            │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 1.4 HOW軸: Value Stream（価値の流れ）

```
┌────────────────────────────────────────────────────────────────────────────┐
│                    HOW軸: Value Stream（価値の流れ）                       │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  【組織がどう価値を流すか】                                                │
│                                                                            │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                    1本のバリューストリーム                          │   │
│  │                                                                     │   │
│  │   価値定義(VL)                                                      │   │
│  │       │                                                             │   │
│  │       ▼                                                             │   │
│  │   ┌───────┐   ┌───────┐   ┌───────┐   ┌───────┐   ┌───────┐         │   │
│  │   │ VS0   │──▶│ VS1   │──▶│ VS2   │──▶│ VS3   │──▶│ VS4   │──▶ ...  │   │
│  │   │       │   │       │   │       │   │       │   │       │         │   │
│  │   └───────┘   └───────┘   └───────┘   └───────┘   └───────┘         │   │
│  │       │           │           │           │           │             │   │
│  │       ▼           ▼           ▼           ▼           ▼             │   │
│  │   ┌───────┐   ┌───────┐   ┌───────┐   ┌───────┐   ┌───────┐         │   │
│  │   │組織の │   │組織の │   │組織の │   │組織の │   │組織の │         │   │
│  │   │活動1  │   │活動2  │   │活動3  │   │活動4  │   │活動5  │         │   │
│  │   └───────┘   └───────┘   └───────┘   └───────┘   └───────┘         │   │
│  │                                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ※1価値定義 = 1バリューストリーム（複数の並列ストリームではない）        │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 1.5 VL × VS マッピング

```
┌────────────────────────────────────────────────────────────────────────────┐
│                      VL × VS マッピング表                                  │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│            │ VS0  │ VS1  │ VS2  │ VS3  │ VS4  │ VS5  │ VS6  │ VS7  │      │
│            │ 潜在 │ 認知 │ 選好 │ 決定 │ 獲得 │ 実感 │ 継続 │ 共創 │      │
│  ──────────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┤      │
│  VL3-a     │      │  ●   │  ●   │      │      │      │      │      │      │
│  栄養計算  │      │      │      │      │      │      │      │      │      │
│  ──────────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┤      │
│  VL3-b     │      │      │      │  ●   │  ●   │  ●   │      │      │      │
│  食事記録  │      │      │      │      │      │      │      │      │      │
│  ──────────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┤      │
│  VL3-c     │      │      │      │      │      │  ●   │  ●   │  ●   │      │
│  運動連携  │      │      │      │      │      │      │      │      │      │
│  ──────────┴──────┴──────┴──────┴──────┴──────┴──────┴──────┴──────┘      │
│                                                                            │
│  ● = この価値がこのステージで実現される                                   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. Problem Space（問題領域）構造

### 2.1 Problem Spaceの全体構造

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                       PROBLEM SPACE（問題領域）                            ┃
┃                          Phase 3 で設計                                    ┃
┃                      = WHAT（何を解決するか）                              ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃                                                                            ┃
┃    CL1（活動領域）         抽象度: 高     担当: 経営層                     ┃
┃    ┌────────────────────────────────────────────────────────────────┐      ┃
┃    │  「どの領域で活動するか」の識別（傾向的分類）                  │      ┃
┃    │                                                                │      ┃
┃    │   ┌──────────┐   ┌──────────┐   ┌──────────┐                   │      ┃
┃    │   │ 顧客管理 │   │ 製品開発 │   │ サプライ │   ...             │      ┃
┃    │   │          │   │          │   │ チェーン │                   │      ┃
┃    │   └────┬─────┘   └────┬─────┘   └────┬─────┘                   │      ┃
┃    └────────┼──────────────┼──────────────┼─────────────────────────┘      ┃
┃             │              │              │                                ┃
┃             ▼              ▼              ▼                                ┃
┃    CL2（ケイパビリティ）   抽象度: 中     担当: 事業部長/PO                ┃
┃    ┌────────────────────────────────────────────────────────────────┐      ┃
┃    │  「何ができる必要があるか」の分類（Core/Supporting/Generic）   │      ┃
┃    │                                                                │      ┃
┃    │   ┌──────────┐   ┌──────────┐   ┌──────────┐                   │      ┃
┃    │   │顧客獲得  │   │製品企画  │   │調達管理  │   ...             │      ┃
┃    │   │[Core]    │   │[Core]    │   │[Support] │                   │      ┃
┃    │   └────┬─────┘   └────┬─────┘   └────┬─────┘                   │      ┃
┃    └────────┼──────────────┼──────────────┼─────────────────────────┘      ┃
┃             │              │              │                                ┃
┃             ▼              ▼              ▼                                ┃
┃    CL3（業務オペレーション） 抽象度: 低   担当: 業務担当者                 ┃
┃    ┌────────────────────────────────────────────────────────────────┐      ┃
┃    │  「具体的に何をするか」の詳細（ユースケース粒度）              │      ┃
┃    │                                                                │      ┃
┃    │   ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐              │      ┃
┃    │   │リード   │ │商談    │ │契約    │ │オンボー │ ...           │      ┃
┃    │   │獲得    │ │管理    │ │締結    │ │ディング│               │      ┃
┃    │   └─────────┘ └─────────┘ └─────────┘ └─────────┘              │      ┃
┃    └────────────────────────────────────────────────────────────────┘      ┃
┃                                                                            ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

### 2.2 CL階層とDDD対応

```
┌────────────────────────────────────────────────────────────────────────────┐
│                    CL階層とDDDの対応関係                                   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│   Parasol                              DDD                                 │
│   ───────────────────                  ───────────────────                 │
│                                                                            │
│   ┌─────────────────┐                  ┌─────────────────┐                 │
│   │  CL1 活動領域   │  ◀──────────▶   │  Problem Space  │                 │
│   │  （傾向的分類） │                  │  （問題領域）   │                 │
│   └────────┬────────┘                  └─────────────────┘                 │
│            │                                                               │
│            ▼                                                               │
│   ┌─────────────────┐                  ┌─────────────────┐                 │
│   │CL2 ケイパビリティ│  ◀──────────▶   │   Subdomain     │                 │
│   │ Core/Support/   │                  │ Core/Supporting │                 │
│   │ Generic         │                  │ /Generic        │                 │
│   └────────┬────────┘                  └─────────────────┘                 │
│            │                                                               │
│            ▼                                                               │
│   ┌─────────────────┐                  ┌─────────────────┐                 │
│   │CL3 業務オペレー │  ◀──────────▶   │  Domain Model   │                 │
│   │    ション       │                  │  （詳細）       │                 │
│   └─────────────────┘                  └─────────────────┘                 │
│            │                                                               │
│            │ ← この境界がSpace変換点                                       │
│            ▼                                                               │
│   ╔═════════════════╗                  ┌─────────────────┐                 │
│   ║ Solution Space  ║  ◀──────────▶   │ Bounded Context │                 │
│   ╚═════════════════╝                  └─────────────────┘                 │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 2.3 Core/Supporting/Generic 分類

```
┌────────────────────────────────────────────────────────────────────────────┐
│                   CL2 ケイパビリティ分類                                   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│    ┌─────────────────────────────────────────────────────────────────┐     │
│    │                         Core                                    │     │
│    │                      （差別化能力）                             │     │
│    │  ┌─────────────────────────────────────────────────────────┐    │     │
│    │  │ • 競争優位の源泉                                        │    │     │
│    │  │ • 独自開発・内製が必要                                  │    │     │
│    │  │ • 最大の投資対象                                        │    │     │
│    │  │                                                         │    │     │
│    │  │ 例: ブランド構築、製品開発、顧客体験設計                │    │     │
│    │  └─────────────────────────────────────────────────────────┘    │     │
│    └─────────────────────────────────────────────────────────────────┘     │
│                                                                            │
│    ┌─────────────────────────────────────────────────────────────────┐     │
│    │                      Supporting                                 │     │
│    │                    （支援能力）                                 │     │
│    │  ┌─────────────────────────────────────────────────────────┐    │     │
│    │  │ • Coreを支える必要な能力                                │    │     │
│    │  │ • 差別化には直接貢献しない                              │    │     │
│    │  │ • 効率化・標準化が重要                                  │    │     │
│    │  │                                                         │    │     │
│    │  │ 例: 在庫管理、人事管理、経理処理                        │    │     │
│    │  └─────────────────────────────────────────────────────────┘    │     │
│    └─────────────────────────────────────────────────────────────────┘     │
│                                                                            │
│    ┌─────────────────────────────────────────────────────────────────┐     │
│    │                       Generic                                   │     │
│    │                    （汎用能力）                                 │     │
│    │  ┌─────────────────────────────────────────────────────────┐    │     │
│    │  │ • 業界共通の標準的な能力                                │    │     │
│    │  │ • 外部調達・SaaSで十分                                  │    │     │
│    │  │ • 最小コストで確保                                      │    │     │
│    │  │                                                         │    │     │
│    │  │ 例: メール送信、ログ管理、認証基盤                      │    │     │
│    │  └─────────────────────────────────────────────────────────┘    │     │
│    └─────────────────────────────────────────────────────────────────┘     │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. Solution Space（解決領域）構造

### 3.1 Solution Spaceの全体構造

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                      SOLUTION SPACE（解決領域）                            ┃
┃                        Phase 4-6 で設計                                    ┃
┃                      = HOW（どう解決するか）                               ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃                                                                            ┃
┃    BC（Bounded Context）   抽象度: 高     担当: アーキテクト               ┃
┃    ┌────────────────────────────────────────────────────────────────┐      ┃
┃    │  「どの境界で責任を分けるか」の設計                            │      ┃
┃    │                                                                │      ┃
┃    │   ┌──────────┐   ┌──────────┐   ┌──────────┐                   │      ┃
┃    │   │ 顧客管理 │   │ 注文管理 │   │ 在庫管理 │   ...             │      ┃
┃    │   │    BC    │   │    BC    │   │    BC    │                   │      ┃
┃    │   └────┬─────┘   └────┬─────┘   └────┬─────┘                   │      ┃
┃    └────────┼──────────────┼──────────────┼─────────────────────────┘      ┃
┃             │              │              │                                ┃
┃             ▼              ▼              ▼                                ┃
┃    UseCase（ユースケース）  抽象度: 中    担当: PO/開発                    ┃
┃    ┌────────────────────────────────────────────────────────────────┐      ┃
┃    │  「ユーザーが何をするか」の定義（← CL3からマッピング）         │      ┃
┃    │                                                                │      ┃
┃    │   ┌──────────┐   ┌──────────┐   ┌──────────┐                   │      ┃
┃    │   │顧客登録  │   │注文作成  │   │在庫確認  │   ...             │      ┃
┃    │   │  UC      │   │  UC      │   │  UC      │                   │      ┃
┃    │   └────┬─────┘   └────┬─────┘   └────┬─────┘                   │      ┃
┃    └────────┼──────────────┼──────────────┼─────────────────────────┘      ┃
┃             │              │              │                                ┃
┃             ▼              ▼              ▼                                ┃
┃    Service（サービス）      抽象度: 低    担当: 開発リード                 ┃
┃    ┌────────────────────────────────────────────────────────────────┐      ┃
┃    │  「どのサービスで実現するか」の設計                            │      ┃
┃    │                                                                │      ┃
┃    │   ┌──────────┐   ┌──────────┐   ┌──────────┐                   │      ┃
┃    │   │Customer  │   │Order     │   │Inventory │   ...             │      ┃
┃    │   │Service   │   │Service   │   │Service   │                   │      ┃
┃    │   └────┬─────┘   └────┬─────┘   └────┬─────┘                   │      ┃
┃    └────────┼──────────────┼──────────────┼─────────────────────────┘      ┃
┃             │              │              │                                ┃
┃             ▼              ▼              ▼                                ┃
┃    Implementation（実装）   抽象度: 最低  担当: 開発者                     ┃
┃    ┌────────────────────────────────────────────────────────────────┐      ┃
┃    │  「コードとしてどう実装するか」                                │      ┃
┃    │                                                                │      ┃
┃    │   ┌──────────┐   ┌──────────┐   ┌──────────┐                   │      ┃
┃    │   │customer_ │   │order_    │   │inventory_│   ...             │      ┃
┃    │   │service.py│   │service.py│   │service.py│                   │      ┃
┃    │   └──────────┘   └──────────┘   └──────────┘                   │      ┃
┃    └────────────────────────────────────────────────────────────────┘      ┃
┃                                                                            ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

### 3.2 CL3 → BC マッピング

```
┌────────────────────────────────────────────────────────────────────────────┐
│                     CL3 → BC マッピング                                    │
│                   （Problem Space → Solution Space）                       │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│   Problem Space (WHAT)              Solution Space (HOW)                   │
│   ─────────────────────             ─────────────────────                  │
│                                                                            │
│   CL3（業務オペレーション）                                                │
│   ┌─────────────────────┐                                                  │
│   │ • リード獲得        │ ─────┐                                          │
│   │ • 商談管理          │ ─────┼──▶  ┌─────────────────┐                   │
│   │ • 見積作成          │ ─────┘      │  営業管理 BC    │                   │
│   └─────────────────────┘              └─────────────────┘                   │
│                                                                            │
│   ┌─────────────────────┐                                                  │
│   │ • 契約締結          │ ─────┐                                          │
│   │ • 契約更新          │ ─────┼──▶  ┌─────────────────┐                   │
│   │ • 契約解約          │ ─────┘      │  契約管理 BC    │                   │
│   └─────────────────────┘              └─────────────────┘                   │
│                                                                            │
│   ┌─────────────────────┐                                                  │
│   │ • オンボーディング  │ ─────┐                                          │
│   │ • サポート対応      │ ─────┼──▶  ┌─────────────────┐                   │
│   │ • 解約防止          │ ─────┘      │ カスタマーサクセス BC│              │
│   └─────────────────────┘              └─────────────────┘                   │
│                                                                            │
│   【マッピング原則】                                                       │
│   • 1つのCL3は1つのBCに属する（明確な責任境界）                           │
│   • 複数のCL3が1つのBCにまとまることがある（凝集性）                      │
│   • BC間の関係はContext Mapで定義                                         │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 3.3 BC内部構造

```
┌────────────────────────────────────────────────────────────────────────────┐
│                      BC（Bounded Context）内部構造                         │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│    ┌────────────────────────────────────────────────────────────────┐      │
│    │                    営業管理 BC                                  │      │
│    ├────────────────────────────────────────────────────────────────┤      │
│    │                                                                │      │
│    │  【Domain Model】                                              │      │
│    │  ┌──────────────────────────────────────────────────────────┐  │      │
│    │  │  Entities        Aggregates      Value Objects           │  │      │
│    │  │  ┌─────────┐    ┌─────────────┐  ┌──────────────┐        │  │      │
│    │  │  │ Lead    │    │ Opportunity │  │ ContactInfo  │        │  │      │
│    │  │  │ Account │    │ (root)      │  │ Address      │        │  │      │
│    │  │  │ Contact │    │   │         │  │ Money        │        │  │      │
│    │  │  └─────────┘    │   ├─Lead    │  └──────────────┘        │  │      │
│    │  │                 │   ├─Quote   │                          │  │      │
│    │  │                 │   └─Activity│                          │  │      │
│    │  │                 └─────────────┘                          │  │      │
│    │  └──────────────────────────────────────────────────────────┘  │      │
│    │                                                                │      │
│    │  【Application Services】                                      │      │
│    │  ┌──────────────────────────────────────────────────────────┐  │      │
│    │  │  LeadService     OpportunityService    QuoteService      │  │      │
│    │  │  ┌───────────┐   ┌─────────────────┐   ┌─────────────┐   │  │      │
│    │  │  │createLead │   │createOpportunity│   │generateQuote│   │  │      │
│    │  │  │qualifyLead│   │progressStage   │   │approveQuote │   │  │      │
│    │  │  │assignLead │   │closeOpportunity│   │sendQuote    │   │  │      │
│    │  │  └───────────┘   └─────────────────┘   └─────────────┘   │  │      │
│    │  └──────────────────────────────────────────────────────────┘  │      │
│    │                                                                │      │
│    │  【Infrastructure】                                            │      │
│    │  ┌──────────────────────────────────────────────────────────┐  │      │
│    │  │  Repository        API            Event Publisher        │  │      │
│    │  │  ┌───────────┐    ┌────────────┐  ┌─────────────────┐    │  │      │
│    │  │  │LeadRepo   │    │/leads      │  │LeadCreatedEvent │    │  │      │
│    │  │  │AccountRepo│    │/opportunity│  │OpportunityWon   │    │  │      │
│    │  │  └───────────┘    └────────────┘  └─────────────────┘    │  │      │
│    │  └──────────────────────────────────────────────────────────┘  │      │
│    │                                                                │      │
│    └────────────────────────────────────────────────────────────────┘      │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. 3領域の統合ビュー

### 4.1 Three-Space Flow（3領域フロー）

```
┌────────────────────────────────────────────────────────────────────────────┐
│                    Parasol V5 Three-Space Flow                             │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  ╔════════════════════════════════════════════════════════════════════╗    │
│  ║  VALUE SPACE（価値領域）                              Phase 1-2    ║    │
│  ║  ──────────────────────────────────────────────────────────────    ║    │
│  ║  WHY + WHEN                                                        ║    │
│  ║                                                                    ║    │
│  ║    VL1 → VL2 → VL3 → VMS → VS0 → VS1 → ... → VS7                  ║    │
│  ║    (価値)            (マイル) (顧客状態遷移)                       ║    │
│  ╚════════════════════════════════════════════════════════════════════╝    │
│                                    │                                       │
│                                    ▼ 価値→問題 変換                        │
│  ╔════════════════════════════════════════════════════════════════════╗    │
│  ║  PROBLEM SPACE（問題領域）= WHAT                        Phase 3    ║    │
│  ║  ──────────────────────────────────────────────────────────────    ║    │
│  ║  機能要件（Functional Requirements）                               ║    │
│  ║                                                                    ║    │
│  ║    CL1 ────────→ CL2 ────────→ CL3                                ║    │
│  ║   (活動領域)    (ケイパビリティ)  (業務オペレーション)              ║    │
│  ║    経営層         事業部長          業務担当者                      ║    │
│  ╚════════════════════════════════════════════════════════════════════╝    │
│                                    │                                       │
│                                    ▼ 問題→解決 変換（DDDマッピング）       │
│  ╔════════════════════════════════════════════════════════════════════╗    │
│  ║  SOLUTION SPACE（解決領域）= HOW                      Phase 4-6    ║    │
│  ║  ──────────────────────────────────────────────────────────────    ║    │
│  ║  設計パラメータ（Design Parameters）                               ║    │
│  ║                                                                    ║    │
│  ║    BC ────────→ UseCase ────────→ Service ────────→ 実装          ║    │
│  ║  (境界Ctx)       (←CL3)         (設計)            (コード)        ║    │
│  ║  アーキテクト    PO/開発         開発リード         開発者          ║    │
│  ╚════════════════════════════════════════════════════════════════════╝    │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 価値トレーサビリティ（Value Traceability）

```
┌────────────────────────────────────────────────────────────────────────────┐
│                     価値トレーサビリティ                                   │
│               「なぜこのコードが必要か」を価値から追跡                     │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│   VL1: 健康的な生活を支援                                                  │
│     │                                                                      │
│     └─▶ VL2: 食事管理                                                     │
│           │                                                                │
│           └─▶ VL3: 栄養計算の可視化                                       │
│                 │                                                          │
│                 └─▶ VS3: 顧客が購入を決定する ← この価値がここで実現       │
│                       │                                                    │
│   ──────────────────────────────────────────────────────── Space境界 ────  │
│                       │                                                    │
│                       └─▶ CL2: 栄養管理ケイパビリティ [Core]              │
│                             │                                              │
│                             └─▶ CL3: 食事栄養計算オペレーション           │
│                                   │                                        │
│   ──────────────────────────────────────────────────────── Space境界 ────  │
│                                   │                                        │
│                                   └─▶ BC: 栄養管理コンテキスト            │
│                                         │                                  │
│                                         └─▶ UseCase: 食事栄養計算UC       │
│                                               │                            │
│                                               └─▶ Service: NutritionService│
│                                                     │                      │
│                                                     └─▶ nutrition_calc.py │
│                                                                            │
│   【追跡可能性の価値】                                                     │
│   • なぜこのコードが必要か → VL3まで遡れる                                │
│   • この変更の影響範囲は → 依存するVL/VS/CLを特定できる                   │
│   • 優先度の根拠は → Core/Supporting分類で判断できる                      │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 関連ドキュメント

- [three-space-flow-spec.md](./three-space-flow-spec.md) - 3スペースフローの全体仕様
- [cl3-to-bc-ascii-diagrams.md](./cl3-to-bc-ascii-diagrams.md) - CL3→BCマッピングの詳細図
- [_value-methodology.md](../_value-methodology.md) - 価値方法論の完全リファレンス
- [zigzag-foundations.md](../philosophy/zigzag-foundations.md) - ZIGZAGプロセスの理論的基盤
