# Parasol Assurance Gate - 価値保証ゲートシステム
# VMS1-VMS5マイルストーンと各Phase間での価値継承・品質保証

name: "Parasol Assurance Gate"
version: "1.0.0"
description: "価値劣化を防止し、フェーズ間の価値継承を保証するゲートシステム"

# ===== 設定 =====
configuration:
  gate_enforcement:
    strict_mode: true
    auto_blocking: true
    override_authority: ["value_architect", "project_owner"]
    
  quality_thresholds:
    value_consistency: 0.95        # 価値一貫性 95%以上
    traceability_completeness: 0.90 # トレーサビリティ完全性 90%以上
    evidence_quality: 3.5          # 根拠品質 3.5/5.0以上
    necessity_score: 3.5           # 構造的必然性 3.5/5.0以上
    
  milestone_gates:
    ms1_enabled: true
    ms2_enabled: true
    ms3_enabled: true
    ms4_enabled: true
    ms5_enabled: true
    
  phase_gates:
    entry_gates: true    # フェーズ開始時
    progress_gates: true # フェーズ実行中
    exit_gates: true     # フェーズ完了時

# ===== ゲート種別 =====
gate_types:
  phase_entry_gate:
    name: "フェーズ入場ゲート"
    description: "Phase開始前の前提条件と準備状況チェック"
    trigger: "phase_start_requested"
    
    validation_items:
      prerequisite_completion:
        description: "前フェーズ完了確認"
        check_method: "completion_status_verification"
        pass_criteria: "previous_phase_status == COMPLETED"
        
      value_inheritance:
        description: "価値継承の完全性確認"
        check_method: "value_chain_validation"
        pass_criteria: "value_chain_completeness >= 0.90"
        
      resource_readiness:
        description: "必要リソースと体制の準備確認"
        check_method: "resource_availability_check"
        pass_criteria: "required_resources_available == true"
        
      stakeholder_alignment:
        description: "ステークホルダーの価値理解と合意"
        check_method: "alignment_verification"
        pass_criteria: "stakeholder_agreement >= 0.90"
        
  phase_progress_gate:
    name: "フェーズ進行ゲート"
    description: "Phase実行中のリアルタイム品質・価値監視"
    trigger: "continuous_during_phase"
    frequency: "real_time"
    
    monitoring_items:
      value_degradation:
        description: "価値劣化の早期検出"
        alert_threshold: "degradation_score > 0.15"
        action: "immediate_alert_and_intervention"
        
      imagination_detection:
        description: "想像の設計パターン検出"
        detection_method: "pattern_matching_and_ml"
        action: "block_with_explanation"
        
      necessity_compliance:
        description: "構造的必然性基準の継続遵守"
        check_frequency: "per_decision"
        pass_criteria: "necessity_score >= 3.5"
        
      evidence_quality:
        description: "根拠データ品質の維持"
        monitoring: "continuous"
        alert_threshold: "quality_score < 3.5"
        
  phase_exit_gate:
    name: "フェーズ出口ゲート"
    description: "Phase完了時の成果物品質と次フェーズ準備確認"
    trigger: "phase_completion_requested"
    
    validation_items:
      deliverable_quality:
        description: "成果物の品質基準達成確認"
        validation_method: "automated_quality_check"
        pass_criteria: "all_quality_metrics >= threshold"
        
      value_realization:
        description: "想定価値実現度の測定"
        measurement_method: "kpi_achievement_check"
        pass_criteria: "value_realization_rate >= 0.80"
        
      traceability_chain:
        description: "トレーサビリティチェーンの完全性"
        check_method: "chain_completeness_validation"
        pass_criteria: "chain_completeness >= 0.95"
        
      next_phase_readiness:
        description: "次フェーズ実行準備の完全性"
        preparation_check: "comprehensive_readiness_assessment"
        pass_criteria: "readiness_score >= 0.90"
        
  milestone_gate:
    name: "マイルストーンゲート"
    description: "VMS1-VMS5での価値実現度と品質統合確認"
    trigger: "milestone_achievement_claimed"
    
    validation_items:
      milestone_achievement:
        description: "マイルストーン達成基準の客観的確認"
        validation_method: "multi_dimensional_assessment"
        pass_criteria: "all_success_criteria_met == true"
        
      value_chain_integrity:
        description: "価値チェーン全体の整合性確認"
        check_scope: "vl1_to_implementation"
        pass_criteria: "integrity_score >= 0.95"
        
      roi_realization:
        description: "ROI実現状況の定量的確認"
        measurement: "financial_and_strategic_metrics"
        pass_criteria: "roi_achievement >= planned_roi * 0.80"
        
      stakeholder_satisfaction:
        description: "ステークホルダー満足度確認"
        survey_method: "structured_feedback_collection"
        pass_criteria: "satisfaction_score >= 4.0"

# ===== マイルストーン別ゲート設定 =====
milestone_gates:
  ms1_foundation_gate:
    name: "VMS1：価値基礎確立ゲート"
    timing: "3ヶ月後"
    focus: "価値発見と戦略能力の確立"
    
    specific_checks:
      value_hierarchy_establishment:
        criteria: "VL1→VL2→VL3分解完了"
        validation: "価値階層の論理的整合性確認"
        
      strategic_capability_mapping:
        criteria: "L1戦略能力と投資配分決定完了"
        validation: "ケイパビリティマップの妥当性確認"
        
      stakeholder_alignment:
        criteria: "全ステークホルダーの価値合意"
        validation: "価値理解度95%以上"
        
      measurement_framework:
        criteria: "価値測定フレームワーク確立"
        validation: "KPI設定と測定方法の妥当性"
        
  ms2_strategic_gate:
    name: "VMS2：戦略展開ゲート"
    timing: "6ヶ月後"
    focus: "戦略的ケイパビリティの展開"
    
    specific_checks:
      capability_decomposition:
        criteria: "CL1-CL3ケイパビリティ分解完了"
        validation: "技術設計と価値の整合性確認"
        
      domain_architecture:
        criteria: "ドメイン境界と責任の明確化"
        validation: "境界の論理性と実装可能性"
        
      value_stream_mapping:
        criteria: "VS0-VS7価値ストリーム設計完了"
        validation: "顧客価値フローの妥当性"
        
      implementation_roadmap:
        criteria: "実装ロードマップの策定"
        validation: "実現可能性と価値実現順序"
        
  ms3_tactical_gate:
    name: "VMS3：顧客が主要価値を日常的に体験できる状態ゲート"
    timing: "9ヶ月後"
    focus: "顧客の日常的価値体験の実現"
    
    specific_checks:
      technical_architecture:
        criteria: "技術アーキテクチャ設計完了"
        validation: "非機能要件と価値実現の両立"
        
      service_design:
        criteria: "サービス設計とAPI設計完了"
        validation: "サービス境界と責任の妥当性"
        
      data_architecture:
        criteria: "データアーキテクチャ設計完了"
        validation: "データ整合性と価値実現の確認"
        
      integration_design:
        criteria: "統合設計とインターフェース定義"
        validation: "システム間連携の実現可能性"
        
  ms4_operational_gate:
    name: "VMS4：運用準備ゲート"
    timing: "12ヶ月後"
    focus: "運用と実装の準備完了"
    
    specific_checks:
      implementation_completion:
        criteria: "実装完了と単体テスト通過"
        validation: "機能要件の100%実装確認"
        
      integration_testing:
        criteria: "統合テストと性能テスト完了"
        validation: "非機能要件の達成確認"
        
      operational_readiness:
        criteria: "運用体制とプロセス確立"
        validation: "運用手順書と監視体制の準備"
        
      user_acceptance:
        criteria: "ユーザー受け入れテスト完了"
        validation: "エンドユーザーの満足度確認"
        
  ms5_realization_gate:
    name: "VMS5：価値実現ゲート"
    timing: "18ヶ月後"
    focus: "価値の完全実現と継続改善"
    
    specific_checks:
      value_achievement:
        criteria: "計画価値の実現確認"
        validation: "ROI目標達成率100%以上"
        
      business_impact:
        criteria: "ビジネスインパクトの測定"
        validation: "定量的・定性的効果の確認"
        
      continuous_improvement:
        criteria: "継続改善体制の確立"
        validation: "価値最大化プロセスの稼働"
        
      knowledge_transfer:
        criteria: "ナレッジ移転と組織学習"
        validation: "次期プロジェクトへの知見活用"

# ===== ゲート実行プロセス =====
gate_execution:
  trigger_detection:
    method: "event_driven_and_scheduled"
    sources: ["phase_commands", "milestone_claims", "time_triggers"]
    
  pre_validation:
    data_collection:
      - project_status_data
      - value_trace_history
      - necessity_judgment_results
      - evidence_quality_scores
      
    prerequisite_check:
      - required_data_availability
      - system_operational_status
      - authority_validation
      
  gate_execution:
    sequence:
      1. context_preparation
      2. validation_execution
      3. result_aggregation  
      4. decision_rendering
      5. action_execution
      
    parallel_validation: true  # 並列実行で高速化
    timeout: "30s"            # タイムアウト設定
    
  post_validation:
    result_recording:
      - gate_execution_log
      - validation_results
      - decision_rationale
      - follow_up_actions
      
    notification:
      - stakeholder_notification
      - system_status_update
      - dashboard_refresh

# ===== 品質保証メカニズム =====
quality_assurance:
  value_consistency_check:
    description: "価値の一貫性維持確認"
    algorithm: "semantic_similarity_analysis"
    benchmark: "value_hierarchy_reference"
    threshold: 0.95
    
  traceability_verification:
    description: "トレーサビリティチェーンの完全性"
    method: "graph_completeness_analysis"
    coverage_requirement: 0.90
    missing_link_detection: true
    
  evidence_quality_assurance:
    description: "根拠データの品質保証"
    criteria:
      - data_freshness: "< 6 months"
      - source_reliability: "> 3.5/5.0"
      - completeness: "> 80%"
      - consistency: "> 90%"
      
  necessity_compliance:
    description: "構造的必然性の継続遵守"
    monitoring: "continuous"
    enforcement: "automatic_blocking"
    override: "value_architect_only"

# ===== アクション実行 =====
gate_actions:
  pass_actions:
    - update_project_status: "GATE_PASSED"
    - unlock_next_phase: true
    - record_achievement: true
    - notify_stakeholders: "success"
    - generate_report: "pass_report"
    
  warning_actions:
    - update_project_status: "GATE_WARNING"
    - conditional_proceed: "with_mitigation_plan"
    - escalate_to_architect: true
    - create_improvement_plan: true
    - monitor_closely: true
    
  fail_actions:
    - update_project_status: "GATE_FAILED"
    - block_progression: true
    - require_remediation: true
    - escalate_to_authority: true
    - create_recovery_plan: true
    
  escalation_actions:
    - notify_project_owner: "immediate"
    - schedule_review_meeting: "within_24h"
    - document_issues: "detailed"
    - propose_solutions: "actionable"

# ===== 報告・監視 =====
reporting:
  gate_status_dashboard:
    real_time_display: true
    key_metrics:
      - gate_pass_rate
      - average_gate_time
      - quality_scores
      - value_realization_rate
      
  milestone_progress_report:
    frequency: "weekly"
    distribution: "stakeholders"
    content:
      - milestone_achievement_status
      - quality_trend_analysis
      - risk_identification
      - mitigation_recommendations
      
  quality_trend_analysis:
    frequency: "monthly"
    analysis_scope:
      - gate_performance_trends
      - quality_degradation_patterns
      - improvement_opportunities
      - system_optimization_suggestions

# ===== 統合設定 =====
integrations:
  value_tracer:
    data_source: "value_traces_database"
    real_time_sync: true
    
  necessity_judge:
    judgment_source: "necessity_evaluation_results"
    threshold_alignment: true
    
  phase_commands:
    hook_points: ["pre_execution", "post_execution"]
    auto_trigger: true
    
  notification_system:
    channels: ["email", "slack", "dashboard"]
    priority_routing: true
    
  project_management:
    status_sync: true
    milestone_tracking: true

# ===== セキュリティ・運用 =====
security:
  access_control:
    gate_execution: ["value_architect", "project_owner"]
    override_authority: ["value_architect"]
    view_permissions: ["team_members", "stakeholders"]
    
  audit_logging:
    all_gate_executions: true
    decision_rationale: true
    override_tracking: true
    
  data_integrity:
    checksum_validation: true
    tamper_detection: true
    backup_verification: true

# ===== 使用例 =====
usage_examples:
  ms2_gate_execution:
    trigger: "milestone_achievement_claim"
    input:
      milestone: "VMS2"
      claim_data:
        capability_decomposition: "completed"
        value_stream_design: "completed"
        stakeholder_approval: "obtained"
    process:
      1. data_validation
      2. achievement_verification  
      3. quality_assessment
      4. decision_rendering
    expected_output:
      status: "PASS"
      quality_score: 4.3
      next_actions: ["proceed_to_ms3", "monitor_progress"]
      
  phase_entry_gate_failure:
    trigger: "phase_start_request"
    input:
      phase: "Phase 3"
      prerequisites: "incomplete"
    process:
      1. prerequisite_check
      2. readiness_assessment
      3. gap_identification
    expected_output:
      status: "FAIL"
      blocking_issues: ["incomplete_value_traces", "missing_stakeholder_approval"]
      remediation_plan: "complete_prerequisites_before_retry"
      estimated_delay: "2_weeks"