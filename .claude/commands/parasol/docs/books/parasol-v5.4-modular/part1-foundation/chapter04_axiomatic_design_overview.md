# Chapter 4: Axiomatic Design概説

## MITの廊下での発見

1977年、マサチューセッツ工科大学（MIT）の機械工学科。Nam Suh教授は、学生たちの設計プロジェクトを見て、ある疑問を抱いていました。優秀な学生たちが、なぜこれほど基本的な設計ミスを犯すのか。

ある学生チームは、新しいドアハンドルを設計していました。要求は明確でした：「握りやすく」「回しやすく」「耐久性があり」「美しい」こと。チームは熱心に取り組み、エレガントな曲線を持つハンドルを作り上げました。しかし、実際に使ってみると問題が次々と浮かび上がりました。

握りやすさを追求して太くした結果、子供や高齢者には回しづらくなりました。美しい曲線は、製造コストを押し上げました。さらに深刻だったのは、一つの要求を満たそうとすると、他の要求が犠牲になることでした。まるで、もぐら叩きのように。

「これは学生の能力の問題ではない」とSuh教授は確信しました。「設計という行為自体に、科学的な原理が欠けているのだ」。物理学には運動の法則があり、化学には反応の原理がある。なぜ設計には、そのような普遍的な原理がないのか？

この問いが、Axiomatic Design（公理的設計）理論の出発点となりました。

## なぜこの問題が重要なのか

### ビジネス課題：設計変更の連鎖反応コスト
ボーイング787の開発では、バッテリーシステムの設計変更が、電気系統、冷却システム、機体構造にまで波及し、開発の大幅な遅延と数十億ドルの追加コストを招きました。一つの変更が連鎖反応を起こす理由は、設計要素が複雑に絡み合っているからです。もし設計段階でこの結合を最小化できていれば、影響は限定的だったはずです。

### アーキテクチャ課題：結合による複雑性爆発
マイクロサービスアーキテクチャを採用したある大手ECサイトは、サービス数が100を超えた時点で、深刻な問題に直面しました。在庫サービスの小さな変更が、注文、決済、配送、推薦エンジンなど、20以上のサービスに影響を与えたのです。サービス間の依存関係が複雑に絡み合い、もはや誰も全体像を把握できない状態でした。

### 実装課題：変更影響の予測不可能性
開発者にとって最も恐ろしいのは、「このコードを変更したら、どこに影響が出るか分からない」という状況です。単体テストは通っても、統合環境で予期せぬエラーが発生する。その原因は、コンポーネント間の隠れた依存関係にあります。

## Axiomatic Designの2大公理

Nam Suh教授は、数十年にわたる研究の末、優れた設計が満たすべき2つの普遍的な原理を発見しました。

### 第1公理：独立公理（Independence Axiom）
「機能要求（FR: Functional Requirements）の独立性を維持せよ」

これは、各機能要求が、他の機能要求に影響を与えることなく、独立して満たされるべきという原理です。ドアハンドルの例で言えば、「握りやすさ」を改善しても「回しやすさ」に悪影響を与えてはいけません。

### 第2公理：情報公理（Information Axiom）
「情報内容を最小化せよ」

設計の複雑さは、そこに含まれる情報量に比例します。同じ機能を実現するなら、よりシンプルな設計の方が優れています。これは単に「部品数を減らせ」という意味ではなく、設計の不確実性を最小化することを意味します。

### 設計行列：FR-DPの関係を可視化

機能要求（FR）と設計パラメータ（DP: Design Parameters）の関係は、行列で表現できます。これが設計行列です。

```python
# 設計行列の基本表現
import numpy as np

# 機能要求（FR）
FR = ["握りやすさ", "回しやすさ", "耐久性"]

# 設計パラメータ（DP）  
DP = ["直径", "表面材質", "内部構造"]

# 設計行列 A
# A[i,j] = FRiに対するDPjの影響度
A = np.array([
    [1, 0.3, 0  ],  # 握りやすさ：直径が主、材質も少し影響
    [0.8, 0.2, 0],  # 回しやすさ：直径が大きく影響
    [0, 0.5, 1  ]   # 耐久性：材質と構造が影響
])

# これは「結合設計」の例（非対角要素が多い）
```

理想的な設計は、対角行列（各FRが1つのDPのみに依存）または三角行列（順次的な依存関係）になります。

```plantuml
@startuml
!theme plain
skinparam backgroundColor white

rectangle "設計行列の種類" {
  
  rectangle "非結合設計\n(Uncoupled)" as unc {
    note right : 対角行列\n各FRが独立\n理想的
  }
  
  rectangle "非繋殖設計\n(Decoupled)" as dec {
    note right : 三角行列\n順序依存あり\n実用的
  }
  
  rectangle "結合設計\n(Coupled)" as coup {
    note right : 一般行列\n相互依存\n避けるべき
  }
}

unc -[#green]-> dec : "次善"
dec -[#orange]-> coup : "悪化"

note bottom : 設計の質は行列の形で判断できる

@enduml
```

## 自動車サスペンションの革新

1980年代、自動車業界は難しい選択を迫られていました。乗り心地を良くすれば操縦性が犠牲になり、操縦性を高めれば乗り心地が悪化する。このトレードオフは避けられないものと考えられていました。

### 従来のリジッドアクスル
トラックや初期の乗用車に使われていたリジッドアクスル（固定車軸）は、左右の車輪が一本の軸でつながっています。構造は簡単ですが、致命的な欠陥がありました。

機能要求（FR）：
- FR1: 路面の凹凸を吸収する（乗り心地）
- FR2: カーブで車体を安定させる（操縦性）

設計パラメータ（DP）：
- DP1: バネの硬さ
- DP2: ダンパーの減衰力

問題は、両方のFRが同じDPに依存していたことです。

### Axiomatic Designによる分析
設計行列を作成すると、問題が明確になりました：

```python
# 結合度の計算方法
def calculate_coupling_degree(design_matrix):
    """設計行列の結合度を計算"""
    n = len(design_matrix)
    diagonal_sum = np.trace(design_matrix)
    total_sum = np.sum(np.abs(design_matrix))
    
    # 結合度 = 非対角要素の影響 / 全体の影響
    coupling = 1 - (diagonal_sum / total_sum)
    
    return coupling

# リジッドアクスルの設計行列
rigid_axle = np.array([
    [1, 0.8],  # 乗り心地：バネとダンパー両方に依存
    [0.9, 1]   # 操縦性：両方に強く依存
])

coupling_rigid = calculate_coupling_degree(rigid_axle)
print(f"リジッドアクスルの結合度: {coupling_rigid:.2f}")
# 出力: 0.47 (高い結合度)
```

### 独立懸架への進化
Axiomatic Designの原理に従い、各車輪を独立して制御する独立懸架（Independent Suspension）が開発されました。これにより、FRとDPの関係を整理できました：

新しいDP：
- DP1: 各輪独立のバネレート
- DP2: 各輪独立のダンパー設定
- DP3: アンチロールバー
- DP4: キャンバー角制御

結果として、乗り心地と操縦性を独立して最適化できるようになり、両方の性能が飛躍的に向上しました。

## いつ・どのように使うべきか

### 適用タイミング
- **新規設計時**：白紙から始める際に、最初から非結合設計を目指す
- **既存システムの再設計時**：複雑に絡み合ったシステムを整理する
- **拡張性が重要な場合**：将来の変更に備えて、独立性を確保する

### 成功条件
1. **FRの明確な定義**：曖昧な要求では、独立性の判断ができません
2. **DPの適切な選択**：実装可能で、制御可能なパラメータを選ぶ
3. **段階的な適用**：一度に全てを理想化するのではなく、重要な部分から

### よくある失敗パターン
- **FRの曖昧定義**：「使いやすい」では具体性に欠ける
- **部分最適への固執**：一つのFRだけを見て、全体を見失う
- **理想への固執**：完全な非結合にこだわり、実用性を失う

## 他の手法との組み合わせ

### Agile/Scrum：反復ごとの設計検証
各スプリントで設計行列を更新し、結合度の変化を監視します。リファクタリングの優先順位も、結合度の高い部分から着手することで、効果的な改善が可能です。

### マイクロサービス：サービス境界の非結合化
マイクロサービスの境界は、FRの独立性に基づいて定義すべきです。各サービスが単一の機能要求に対応し、他のサービスへの依存を最小化する。これにより、真に独立したサービス群が実現します。

### DDD：境界コンテキストがFR分離の実装
ドメイン駆動設計の「境界づけられたコンテキスト」は、まさにFRを分離する実装パターンです。各コンテキストが独立した機能要求を持ち、明確なインターフェースでのみ連携する。これは Axiomatic Designの実践例と言えます。

Axiomatic Designは、設計を「芸術」から「科学」に変える強力な理論です。しかし、理論だけでは実践にはつながりません。ZIGZAGプロセスの柔軟性と、Axiomatic Designの厳密性を、どのように統合すればよいのでしょうか。次章では、Parasol V5.4における画期的な統合アプローチを探っていきます。

---

**深く学ぶために**
- 設計行列作成ツール：Appendix 4.1
- 業界別の適用事例集：Appendix 4.2
- 数学的基礎の解説：Appendix 4.3