# DDD vs Parasol: ビジネス分析手法の比較分析

**作成日**: 2025-12-12
**バージョン**: V1.0

---

## エグゼクティブサマリー

DDDの根本的な前提条件である「ドメインエキスパートの存在」は、実際のプロジェクトでは満たされないことが多い。Parasolは、この依存関係を排除し、公開情報とAI駆動分析によって体系的にビジネスを理解する新しいアプローチを提供する。

---

## 1. DDDのビジネス分析アプローチ

### 理想的なDDDモデル

**コラボレーティブ・ドメインモデリング**:
- 技術チームとドメインエキスパートの協働
- ユビキタス言語の創出
- モデル駆動設計
- Bounded Contextの発見

### DDDの具体的な分析手法

#### 1. Event Storming（イベントストーミング）
```
プロセス:
1. ドメインエキスパートと開発者が物理的に集まる
2. 壁に付箋を貼りながらイベントを時系列で配置
3. イベント → コマンド → 集約 → Bounded Contextを発見

問題点:
- ドメインエキスパートの参加が必須
- 物理的な場所が必要
- 長時間の拘束
```

#### 2. Domain Storytelling（ドメインストーリーテリング）
```
プロセス:
1. アクター、ワークオブジェクト、アクティビティを視覚化
2. ストーリー形式でビジネスプロセスを探索
3. ピクトグラムでドメインストーリーを作成

問題点:
- ストーリーの正確性がエキスパートに依存
- 暗黙知の言語化が困難
- 主観的な解釈
```

#### 3. Example Mapping（例マッピング）
```
プロセス:
1. ルール → 例 → 質問の形式で整理
2. 色分けしたカードで視覚化
3. ビヘイビア仕様を作成

問題点:
- エッジケースの網羅が困難
- 例の妥当性検証が必要
- ビジネスルールの正確な把握が前提
```

---

## 2. ドメインエキスパートの現実

### 研究調査から明らかになった事実

**「ビジネス知識は決して一箇所に集約されていない」**
- ドメインエキスパート同士でも意見が対立
- 部分的な視点しか持たない
- 組織全体のビジネス設計を理解している人は稀

**実際の「ドメインエキスパート」の正体**:
```
"真のドメインエキスパートは、時にコードを保守・テストしてきた
開発者自身である。彼らは問題の深い理解、実装方法、進化の経緯、
その理由を把握している"
```

### DDDの失敗パターン

1. **モデルとコードの乖離**
   - 概念モデルと実装が時間とともに分離
   - リファクタリングでモデルが忘れられる

2. **境界の主観性**
   - Bounded Contextの定義が曖昧
   - チーム間で解釈が異なる

3. **過度な抽象化**
   - ビジネス実態と一致しない複雑な抽象
   - 「美しい」モデルが実用的でない

4. **組織的な不整合**
   - DDDが要求する組織変更ができない
   - Conway's Lawとの衝突

---

## 3. Parasolの革新的アプローチ

### ドメインエキスパート依存からの脱却

**従来のDDD**:
```
ドメインエキスパート → ドメインモデル → 実装
        ↑
    ここがボトルネック
```

**Parasol**:
```
公開情報 → 価値ストリーム → ケイパビリティ → 実装
    ↑
AI駆動分析で体系化
```

### Parasolの具体的な分析手法

#### 1. Value Stream Mapping（価値ストリームマッピング）
```yaml
プロセス:
  1. 組織の価値提案から開始
  2. 価値ストリームへの分解（VS0-VS7）
  3. 価値を生む活動のマッピング
  4. 依存関係とフローの特定

利点:
  - ドメインエキスパート不要
  - 公開情報から分析可能
  - 体系的な分解
  - 客観的な境界
```

#### 2. ZIGZAG分解
```yaml
CL1: 活動領域（Activity Area）
    - 傾向的分類（参考情報）
    - 経営層向けの大分類
    ↓
CL2: ケイパビリティ（Capability）
    - 正式分類（★Core/Supporting/Genericはここで適用）
    - 事業部長向けの中分類
    ↓
CL3: 業務オペレーション（Business Operation）
    - 網羅的定義
    - 業務担当者向けの詳細定義
    ↓ Phase 4
BC（Bounded Context）: サービス境界確定
    - CL2から継承したドメイン分類（Core/Supporting/Generic）
    - マイクロサービス境界の確定

※問題領域全体 = WHAT（何を解決するか）

利点:
  - 構造化された思考
  - 完全な分解を強制
  - 関心事の明確な分離
  - トレーサブルな階層
  - CL2→BC→マイクロサービスの明確なマッピングフロー
```

#### 3. ケイパビリティベース分析
```yaml
DDDの問い: 「どんなイベントが起きるか？」
Parasolの問い: 「どんなケイパビリティが必要か？」

例:
VS3-CL1: 初期実践ケイパビリティ（WHAT）
  VS3-CL2-1: プロジェクト設定（HOW）
    VS3-CL3-1: 環境構築オペレーション（HOW）
```

---

## 4. 実践的な比較

### 情報源と分析手法

| 側面 | DDD | Parasol |
|------|-----|---------|
| **情報源** | ワークショップでのエキスパート | 公開情報＋体系的分析 |
| **発見手法** | 協働的な付箋作業 | 構造化分解フレームワーク |
| **検証** | エキスパートの確認 | 価値提供の検証 |
| **用語** | 議論から創発 | 価値ストリームから導出 |
| **境界** | イベントから発見 | ケイパビリティから設計 |
| **スケーラビリティ** | 多数のワークショップ必要 | 体系的適用 |

### 具体例：タスク管理システム

**DDDアプローチ（推測による境界）**:
```yaml
BC-001: サステナビリティコンテキスト
BC-002: 健康ウェルネスコンテキスト
# ビジネスドメインの推測に基づく
```

**Parasolアプローチ（価値による境界）**:
```yaml
VS0: 基盤ステージ（汎用・横断的）
VS1: 認知形成ステージ
VS2: 理解促進ステージ
VS3: 初期実践ステージ
# 価値提供段階に基づく
```

---

## 5. 実際のプロジェクトでの課題

### ドメインエキスパートが存在しない場合

**DDDの場合**:
- 開発者が推測でイベントを作成
- 技術的な分解になりがち
- ビジネスプロセスの欠落
- 結果：技術駆動の設計

**Parasolの場合**:
- 公開情報から価値を分析
- 体系的フレームワークで補完
- AI支援による洞察生成
- 結果：価値駆動の設計

### ビジネス設計スキルが不足している場合

**DDDの場合**:
- 現在のシステムを説明するだけ
- 実装詳細とビジネスロジックの混同
- ビジネスルールの不明確な表現
- UI/画面中心の議論

**Parasolの場合**:
- 構造化アプローチが分析を導く
- Value Stage Swimlanesが明確な境界を提供
- 「全体像を見る」能力に依存しない
- ビジネスオペレーション中心

### 複数の矛盾するエキスパートがいる場合

**DDDの場合**:
- 各エキスパートの部分的視点
- 用語とプロセスの対立
- 「正しい」解釈を巡る政治的争い
- 単一の真実源の欠如

**Parasolの場合**:
- 価値ストリームが客観的基準
- 体系的分解で一貫性確保
- AIが複数視点を統合
- 価値提供が判断基準

---

## 6. 重要な洞察

### DDDのアキレス腱

研究により、DDDの根本的前提（知識豊富で関与度の高いドメインエキスパートの存在）が現実と一致しないことが明らかになった。Eric Evans自身もこの課題を認識していたが、方法論は依然としてこの前提に依存している。

### Parasolのイノベーション

人間のドメインエキスパートを、利用可能な情報の体系的分析で置き換えることにより、ParasolはDDDの最大の実践的制限を回避する。ZIGZAGプロセスと価値駆動アプローチは、DDDが創発的理解に依存する部分に構造を提供する。

### トレードオフ

**DDD**:
- より深い暗黙知を捉える可能性（真のエキスパートが利用可能な場合）
- 人間の洞察と創造性を活用

**Parasol**:
- 人的依存なしに一貫した再現可能な結果
- スケーラブルで体系的なアプローチ

---

## 7. 結論

### 根本的な違い

**DDDの問い**: 「ドメインエキスパートは何と言っているか？」

**Parasolの問い**: 「どんな価値が提供されているか？」

### Parasolの優位性

1. **ドメインエキスパート問題を解決しようとしない - 依存を排除する**
2. **想像ではなく観察可能な価値から始める**
3. **体系的フレームワークが分析を導く**
4. **AIが人間の制限を補完**

### ボトムアップ vs トップダウンの根本的違い

#### DDDのボトムアップ性

**なぜDDDはボトムアップなのか**:
- 個別のドメインエキスパートの視点から開始
- イベントやエンティティから構築
- 局所的理解から境界が創発
- 開発者の思考パターン（具体→抽象）と一致

**断片化の問題**:
```
営業エキスパート → 顧客・注文の視点
在庫エキスパート → 在庫・倉庫の視点  
財務エキスパート → 取引・会計の視点
統合          → 誰が責任を持つ？
```

#### Parasolのトップダウン性

**全体から部分への分解**:
```
組織の目的
    ↓
価値ストリーム（価値の流れ方）
    ↓
ケイパビリティ（価値を可能にするもの）
    ↓
技術的実装
```

**統合はデザイン**:
- 価値フローが最初から設計される
- 局所最適ではなく全体最適
- 変更は価値ラインに沿って伝播

### 実践への示唆

DDDの協働的ドメインモデリングのビジョンは魅力的だが、研究は以下の現実により実践でしばしば失敗することを示している：

1. **真のドメインエキスパートは稀** - 全体を見る人がいない
2. **ビジネス知識は断片化されている** - 部分的な視点の寄せ集め
3. **コミュニケーション障壁は重大** - 専門用語と視点の違い
4. **必要な時間投資は法外** - 継続的なワークショップが現実的でない
5. **ボトムアップの統合問題** - 各部分は正しくても全体が機能しない

Parasolは、これらの現実を認識した実用的な進化を表している。ドメインモデルではなく価値ストリームから始め、人間の専門知識ではなくAI駆動分析を使用することで、ビジネス理解から実装へのより信頼性の高い道筋を提供する。

**重要な洞察**: DDDは「木」を見ることは得意だが、「森」を設計することは苦手。Parasolは最初から「森」を設計してから「木」を配置する。

---

## 関連ドキュメント

- [PHILOSOPHY.md](./PHILOSOPHY.md) - Parasol設計哲学
- [PHILOSOPHY-EXPLAINED.md](./PHILOSOPHY-EXPLAINED.md) - 哲学の詳細解説
- [IMPLEMENTATION-GUIDE.md](./IMPLEMENTATION-GUIDE.md) - 実装ガイド