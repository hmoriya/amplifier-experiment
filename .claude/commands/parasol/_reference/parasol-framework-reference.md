# Parasol V5 フレームワーク リファレンス

**作成日:** 2025-12-09
**バージョン:** V5 Lite
**目的:** Parasolの主要概念・構造・プロセスの包括的リファレンス

---

## 目次

1. [フレームワーク全体像](#1-フレームワーク全体像)
2. [3層アーキテクチャ](#2-3層アーキテクチャ)
3. [Value Stage と Value Stream](#3-value-stage-と-value-stream)
4. [VS-Swimlaneモデル](#4-vs-swimlaneモデル)
5. [ケイパビリティ階層](#5-ケイパビリティ階層)
6. [DDDマッピング](#6-dddマッピング)
7. [具体的ビジネスアーキテクチャ図](#7-具体的ビジネスアーキテクチャ図) ← NEW
8. [ZIGZAGプロセス](#8-zigzagプロセス)
9. [7つのフェーズ](#9-7つのフェーズ)
10. [ソースファイル一覧](#10-ソースファイル一覧)

---

## 1. フレームワーク全体像

### Parasolとは

Parasolは、企業のビジョンからソフトウェア実装までを一貫した方法論で設計するエンタープライズアーキテクチャフレームワークです。

```
┌─────────────────────────────────────────────────────────────────────┐
│                      Parasol V5 Framework                           │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   Phase 0    Phase 1    Phase 2    Phase 3    Phase 4-6   Phase 7  │
│   ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐  │
│   │ 初期 │ → │Context│ → │Value │ → │ Cap  │ → │ SW   │ → │Infra │  │
│   │ 化   │   │ 分析 │   │ 定義 │   │ 分解 │   │ 設計 │   │ 設計 │  │
│   └──────┘   └──────┘   └──────┘   └──────┘   └──────┘   └──────┘  │
│                                                                     │
│   ────────────────────────────────────────────────────────────────  │
│   Business Layer (L1)  →  Service Layer (L2)  →  Impl Layer (L3)   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### コア原則

1. **バックキャスティング**: 理想の未来（VMS5）から逆算してマイルストーンを設計
2. **ZIGZAG思考**: WHAT（何を）とHOW（どう実現）を層間で往復
3. **VS-Swimlane**: 顧客状態×時間軸でケイパビリティを配置
4. **追跡可能性**: Value → Capability → Software の一貫したトレーサビリティ

**ソース:** `_parasol-overview.md`, `_parasol-architecture-overview.md`

---

## 2. 3層アーキテクチャ

### 層構造

```
┌─────────────────────────────────────────────────────────────────────┐
│                        Value Layer (価値層)                         │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ Vision → Mission → Strategy → Value Stream → Value Stage   │   │
│  │                                                             │   │
│  │ 【責務】企業の存在意義と顧客への価値提供の定義              │   │
│  └─────────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────────┤
│                    Capability Layer (ケイパビリティ層)              │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ CL1: Domain → CL2: Capability → CL3(≈BizOp) → BC           │   │
│  │                                                             │   │
│  │ 【責務】価値実現に必要な組織能力の構造化                    │   │
│  └─────────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────────┤
│                      Software Layer (ソフトウェア層)                │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ Architecture → Module → API → Implementation               │   │
│  │                                                             │   │
│  │ 【責務】ケイパビリティを実現するシステムの設計・実装        │   │
│  └─────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────┘
```

### 層間の関係

| 上位層 | 下位層 | 関係性 |
|--------|--------|--------|
| Value Stage | Capability Domain (CL1) | VS が CL1 のスコープを定義 |
| Capability (CL2) | Subdomain | CL2 が Subdomain として分類される |
| Operation (CL3) | Bounded Context | N:M関係（1 BC が複数CL3を包含、デフォルト） |

### 追跡可能性の原則

```
Value Stage (VS2: 製品開発)
    ↓ 実現手段として
Capability Domain (CL1: 研究開発領域)
    ↓ 詳細化として
Capability (CL2: 発酵技術研究)
    ↓ 操作として
Operation (CL3: 酵母株スクリーニング)
    ↓ 実装として
Bounded Context (YeastScreeningContext)
    ↓ 実装として
Software Module (yeast-screening-service)
```

**ソース:** `_parasol-architecture-overview.md`

---

## 3. Value Stage と Value Stream

### 用語定義

| 用語 | 定義 | 例 |
|------|------|-----|
| **Value Stream (VStr)** | 顧客価値を創造・提供する一連の活動フロー全体 | 「顧客が課題を認識してから満足状態に至るまでの全体の流れ」 |
| **Value Stage (VS)** | Value Streamを構成する個々の段階（VS0-VS7） | VS2: 製品開発、VS3: マーケティング |

### 標準型 Value Stage（8段階）

```
┌─────────────────── Value Stream（全体の流れ）───────────────────┐
│                                                                 │
│  VS0 → VS1 → VS2 → VS3 → VS4 → VS5 → VS6 → VS7               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

VS0: ビジョン策定・戦略立案     (Generic)    - 経営の方向性決定
VS1: 市場機会発見・インサイト獲得 (Supporting) - 顧客理解と機会発見
VS2: 製品開発・イノベーション   (Core) ★    - 価値創造の中核
VS3: ブランディング・マーケティング (Core) ★ - 市場への価値訴求
VS4: 販売・流通・サプライチェーン (Supporting) - 価値の届け先
VS5: カスタマーサポート・品質保証 (Supporting) - 価値の維持
VS6: データ活用・DX            (Generic)    - 横断的なデジタル基盤
VS7: 業務改善・オペレーション   (Generic)    - 継続的な改善

★ = Core Domain（競争優位性の源泉）
```

### 業種別バリエーション

| 業種 | Core Domain | 特徴 |
|------|-------------|------|
| 消費財メーカー | VS2 (製品開発), VS3 (マーケティング) | 標準型 |
| 人材派遣 | 求職者VStr + 企業VStr | 両面市場型 |
| 地方銀行 | VS1 (関係構築), VS4 (取引実行) | 金融サービス型 |

**ソース:** `_value-methodology.md`, `_parasol-overview.md`

---

## 4. VS-Swimlaneモデル

### 概念

VS-Swimlaneは、Value Stage（顧客状態）を横軸、ケイパビリティ分類を縦軸とした2次元マトリクスです。

```
          │ VS0  │ VS1  │ VS2  │ VS3  │ VS4  │ VS5  │ VS6  │ VS7  │
          │戦略  │発見  │開発  │訴求  │流通  │支援  │DX   │改善  │
──────────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┤
Core      │      │      │ ★★  │ ★★  │      │      │      │      │
(競争優位)│      │      │製品  │ブランド│     │      │      │      │
──────────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┤
Supporting│      │ ○   │      │      │ ○   │ ○   │      │      │
(支援)    │      │市場  │      │      │販売  │CS    │      │      │
──────────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┼──────┤
Generic   │ △   │      │      │      │      │      │ △   │ △   │
(汎用)    │経営  │      │      │      │      │      │IT   │業務  │
──────────┴──────┴──────┴──────┴──────┴──────┴──────┴──────┴──────┘

★★ = Core Domain（差別化投資）
○  = Supporting Domain（効率化投資）
△  = Generic Domain（標準化/外部化）
```

### 3つの特性

1. **時間軸との対応**: VS0→VS7は顧客の状態遷移（時間経過）を表現
2. **コンテキスト最適化**: 各VSで必要なケイパビリティが異なる
3. **参照基準**: 業務設計やシステム設計の配置基準として機能

### 配置の判断基準

| 分類 | 判断基準 | 投資方針 |
|------|----------|----------|
| **Core** | 競争優位の源泉、差別化要素 | 自社開発、重点投資 |
| **Supporting** | Coreを支援、業界共通 | 効率化、一部外部化 |
| **Generic** | 業界横断で共通 | 標準パッケージ、SaaS |

**ソース:** `_value-methodology.md`, `_parasol-overview.md`

---

## 5. ケイパビリティ階層

### 3レベル構造（CL1-CL2-CL3）

```
┌─────────────────────────────────────────────────────────────────────┐
│ CL1: Activity Area（活動領域） - 傾向的分類（参考情報）             │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ 「何を実現するか」の大分類 + Core/Supporting/Genericの傾向      │ │
│ │ 例: 研究開発領域、マーケティング領域、サプライチェーン領域      │ │
│ │ ※この分類はCL2に継承されない（参考情報のみ）                   │ │
│ └─────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│ CL2: Capability（ケイパビリティ） - 正式分類（投資判断の根拠）      │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ 「どんな能力が必要か」+ Core/Supporting/Genericの正式分類       │ │
│ │ 例: 発酵技術研究(Core)、消費者分析(Supporting)、在庫管理(Generic)│ │
│ │ ※CL1がGenericでもCL2で個別にCore判定されることがある           │ │
│ └─────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│ CL3（≈Business Operation） - 分類なし（網羅性重視）                 │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ 「具体的に何をするか」の業務詳細                                │ │
│ │ 例: 酵母株スクリーニング、感性評価テスト、需要予測              │ │
│ │ ※分類は行わず、業務の網羅性が目的                              │ │
│ └─────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│ BC: Bounded Context - CL2から分類継承                               │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ 実装単位の境界定義                                              │ │
│ │ 親CL2のCore/Supporting/Generic分類を継承                        │ │
│ └─────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
```

### CL1分解パターン

| パターン | 説明 | 適用場面 |
|----------|------|----------|
| バリューチェーン分析型 | 価値創造プロセスに沿った分解 | 製造業、流通業 |
| 顧客接点分析型 | 顧客タッチポイント基準の分解 | サービス業、小売業 |
| プラットフォーム分析型 | プラットフォーム構成要素での分解 | IT企業、プラットフォーム事業 |

### CL2分解パターン

| パターン | 説明 | 例 |
|----------|------|-----|
| 研究開発分離型 | 基礎研究と応用開発を分離 | 製薬、化学 |
| 顧客セグメント型 | 顧客セグメントごとに分解 | B2B+B2C併存 |
| プロダクトライン型 | 製品ライン単位で分解 | 多角化企業 |
| ライフサイクル型 | 製品ライフサイクルで分解 | 耐久消費財 |

### CL3 BC境界パターン

| パターン | 説明 | 適用条件 |
|----------|------|----------|
| 集約ルート中心型 | 主要エンティティを中心に境界設定 | 明確なドメインモデル |
| ビジネスプロセス型 | プロセス単位で境界設定 | ワークフロー中心 |
| チーム境界型 | 開発チーム単位で境界設定 | コンウェイの法則重視 |

**ソース:** `decomposition-patterns.md`

---

## 6. DDDマッピング

### Parasol概念とDDD概念の対応

```
┌──────────────────────────────────────────────────────────────────┐
│                    Parasol → DDD マッピング                      │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Parasol概念              DDD概念           Core/Supp/Generic    │
│  ─────────────────────    ──────────────    ─────────────────    │
│  Value Stage (VS)    →    Domain            -                   │
│  CL1 (Activity Area) →    Problem Space     傾向的（参考）      │
│  CL2 (Capability)    →    Subdomain         正式分類            │
│  CL3 (Operation)     →    Domain Model詳細   なし               │
│  BC                  →    Bounded Context   CL2から継承         │
│  Service Boundary    →    Context Boundary  -                   │
│  API Contract        →    Context Map/ACL   -                   │
│                                                                  │
│  重要: CL1の分類はCL2に継承されない                              │
└──────────────────────────────────────────────────────────────────┘
```

### Subdomain分類とCL2の対応

| DDD Subdomain | Parasol CL2 | 投資方針 |
|---------------|-------------|----------|
| Core Domain | Core Capability | 差別化、自社開発 |
| Supporting Subdomain | Supporting Capability | 効率化、一部外注 |
| Generic Subdomain | Generic Capability | 標準化、SaaS/パッケージ |

### Bounded Context設計原則

1. **自律性**: 各BCは独立してデプロイ可能
2. **明示的境界**: API契約で境界を明確化
3. **ユビキタス言語**: BC内で一貫した用語
4. **コンテキストマップ**: BC間の関係を明示

```
┌─────────────────────────────────────────────────────────────────┐
│                    Context Map 例                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [製品開発BC]──ACL──▶[マーケティングBC]                        │
│       │                     │                                  │
│       │ Shared Kernel       │ Customer-Supplier                │
│       ▼                     ▼                                  │
│  [品質管理BC]          [販売BC]                                │
│                                                                 │
│  ACL = Anti-Corruption Layer（腐敗防止層）                      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**ソース:** `0-help.md`

---

## 7. 具体的ビジネスアーキテクチャ図

### 7.1 飲料メーカー全体ビジネスアーキテクチャ

飲料・食品メーカーを例に、VS→CL1→CL2→CL3→BC→Moduleの全体構造を示します。

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        飲料メーカー ビジネスアーキテクチャ全体図                     │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                         VALUE LAYER（価値層）                                │   │
│  │  ┌─────────────────────────────────────────────────────────────────────┐   │   │
│  │  │ Vision: 「おいしさと楽しさで世界に輝きを」                           │   │   │
│  │  │ Mission: 「期待を超えるおいしさ、楽しい生活文化の創造」              │   │   │
│  │  └─────────────────────────────────────────────────────────────────────┘   │   │
│  │                                     ↓                                       │   │
│  │  ┌──────── Value Stream（顧客価値創造フロー）────────────────────────────┐   │   │
│  │  │                                                                       │   │   │
│  │  │  VS0    VS1    VS2     VS3      VS4     VS5     VS6    VS7           │   │   │
│  │  │  戦略 → 発見 → 開発 → 訴求  → 流通  → 支援  → DX  → 改善           │   │   │
│  │  │  [G]    [S]   [C]★   [C]★    [S]     [S]     [G]    [G]            │   │   │
│  │  │                                                                       │   │   │
│  │  │  G=Generic  S=Supporting  C=Core★                                    │   │   │
│  │  └───────────────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
│                                        ↓                                           │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                      CAPABILITY LAYER（ケイパビリティ層）                    │   │
│  │                                                                             │   │
│  │  ┌─── CL1: Domain Classification ───────────────────────────────────────┐  │   │
│  │  │  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐            │  │   │
│  │  │  │研究開発│ │マーケ  │ │サプライ│ │顧客    │ │共通基盤│            │  │   │
│  │  │  │領域    │ │ティング│ │チェーン│ │サービス│ │領域    │            │  │   │
│  │  │  │ [C]★  │ │領域[C]★│ │領域[S] │ │領域[S] │ │ [G]    │            │  │   │
│  │  │  └───┬────┘ └───┬────┘ └───┬────┘ └───┬────┘ └───┬────┘            │  │   │
│  │  └──────┼──────────┼──────────┼──────────┼──────────┼────────────────────┘  │   │
│  │         ↓          ↓          ↓          ↓          ↓                       │   │
│  │  ┌─── CL2: Capability ──────────────────────────────────────────────────┐  │   │
│  │  │  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐            │  │   │
│  │  │  │発酵技術│ │ブランド│ │在庫    │ │問合せ  │ │データ  │            │  │   │
│  │  │  │研究    │ │管理    │ │最適化  │ │管理    │ │分析    │            │  │   │
│  │  │  ├────────┤ ├────────┤ ├────────┤ ├────────┤ ├────────┤            │  │   │
│  │  │  │製品    │ │消費者  │ │物流    │ │品質    │ │マスター│            │  │   │
│  │  │  │開発    │ │分析    │ │管理    │ │保証    │ │管理    │            │  │   │
│  │  │  └───┬────┘ └───┬────┘ └───┬────┘ └───┬────┘ └───┬────┘            │  │   │
│  │  └──────┼──────────┼──────────┼──────────┼──────────┼────────────────────┘  │   │
│  │         ↓          ↓          ↓          ↓          ↓                       │   │
│  │  ┌─── CL3（≈BizOp）→ BC ────────────────────────────────────────────────┐  │   │
│  │  │  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐            │  │   │
│  │  │  │酵母株  │ │キャン  │ │需要    │ │苦情    │ │顧客    │            │  │   │
│  │  │  │選定    │ │ペーン  │ │予測    │ │対応    │ │統合    │            │  │   │
│  │  │  ├────────┤ │管理    │ ├────────┤ ├────────┤ │管理    │            │  │   │
│  │  │  │官能    │ ├────────┤ │配送    │ │検査    │ ├────────┤            │  │   │
│  │  │  │評価    │ │広告    │ │計画    │ │管理    │ │製品    │            │  │   │
│  │  │  │        │ │配信    │ │        │ │        │ │マスタ  │            │  │   │
│  │  │  └────────┘ └────────┘ └────────┘ └────────┘ └────────┘            │  │   │
│  │  └────────────────────────────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
│                                        ↓                                           │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                       SOFTWARE LAYER（ソフトウェア層）                       │   │
│  │  ┌───────────────────────────────────────────────────────────────────────┐  │   │
│  │  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐  │  │   │
│  │  │  │yeast-    │ │campaign- │ │demand-   │ │complaint-│ │customer- │  │  │   │
│  │  │  │screening │ │mgmt-svc  │ │forecast  │ │handling  │ │master-svc│  │  │   │
│  │  │  │-service  │ │          │ │-service  │ │-service  │ │          │  │  │   │
│  │  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘  │  │   │
│  │  │       ↕            ↕            ↕            ↕            ↕        │  │   │
│  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │   │
│  │  │  │                    API Gateway / Event Bus                  │  │  │   │
│  │  │  └─────────────────────────────────────────────────────────────┘  │  │   │
│  │  └───────────────────────────────────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

### 7.2 VS別ケイパビリティ配置詳細図

VS2（製品開発）とVS3（マーケティング）のCore Domainを詳細に展開します。

> **注意**: 以下の図では説明の簡略化のためCL3:BC=1:1で示していますが、
> 実際は**1つのBCが複数のCL3を包含する（1 BC : N CL3）のがデフォルト**です。
> CL3とBCの関係はN:Mであり、プロジェクトの規模やチーム構成により柔軟に決定します。

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                          VS2: 製品開発・イノベーション【Core Domain】               │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│  CL1: 研究開発領域                                                                  │
│  ├── CL2: 発酵技術研究                                                             │
│  │   ├── CL3: 酵母株スクリーニング ─→ BC: YeastScreeningContext                   │
│  │   │   └── Module: yeast-screening-service                                       │
│  │   │       ├── POST /yeast/screen - 酵母スクリーニング実行                       │
│  │   │       └── GET /yeast/{id}/profile - 酵母プロファイル取得                    │
│  │   │                                                                             │
│  │   ├── CL3: 発酵条件最適化 ─────→ BC: FermentationOptContext                     │
│  │   │   └── Module: fermentation-optimization-service                             │
│  │   │                                                                             │
│  │   └── CL3: 香気成分分析 ───────→ BC: AromaAnalysisContext                       │
│  │       └── Module: aroma-analysis-service                                        │
│  │                                                                                  │
│  ├── CL2: 製品開発                                                                 │
│  │   ├── CL3: レシピ設計 ─────────→ BC: RecipeDesignContext                        │
│  │   │   └── Module: recipe-design-service                                         │
│  │   │                                                                             │
│  │   ├── CL3: 官能評価 ───────────→ BC: SensoryEvalContext                         │
│  │   │   └── Module: sensory-evaluation-service                                    │
│  │   │       ├── POST /evaluation/session - 評価セッション作成                     │
│  │   │       ├── POST /evaluation/result - 評価結果登録                            │
│  │   │       └── GET /evaluation/report/{id} - 評価レポート取得                    │
│  │   │                                                                             │
│  │   └── CL3: 試作品管理 ─────────→ BC: PrototypeContext                           │
│  │       └── Module: prototype-management-service                                  │
│  │                                                                                  │
│  └── CL2: 品質研究                                                                 │
│      ├── CL3: 品質分析 ───────────→ BC: QualityAnalysisContext                     │
│      └── CL3: 賞味期限予測 ───────→ BC: ShelfLifePredictionContext                 │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        VS3: ブランディング・マーケティング【Core Domain】           │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│  CL1: マーケティング領域                                                            │
│  ├── CL2: ブランド管理                                                             │
│  │   ├── CL3: ブランド戦略策定 ───→ BC: BrandStrategyContext                       │
│  │   │   └── Module: brand-strategy-service                                        │
│  │   │                                                                             │
│  │   ├── CL3: ブランド資産管理 ───→ BC: BrandAssetContext                          │
│  │   │   └── Module: brand-asset-service                                           │
│  │   │       ├── POST /assets/upload - 資産アップロード                            │
│  │   │       └── GET /assets/brand/{id} - ブランド資産一覧                         │
│  │   │                                                                             │
│  │   └── CL3: パッケージデザイン ─→ BC: PackageDesignContext                       │
│  │       └── Module: package-design-service                                        │
│  │                                                                                  │
│  ├── CL2: 消費者インサイト分析                                                     │
│  │   ├── CL3: 市場調査 ───────────→ BC: MarketResearchContext                      │
│  │   │   └── Module: market-research-service                                       │
│  │   │                                                                             │
│  │   ├── CL3: 消費者行動分析 ─────→ BC: ConsumerBehaviorContext                    │
│  │   │   └── Module: consumer-behavior-service                                     │
│  │   │                                                                             │
│  │   └── CL3: トレンド分析 ───────→ BC: TrendAnalysisContext                       │
│  │       └── Module: trend-analysis-service                                        │
│  │                                                                                  │
│  └── CL2: キャンペーン管理                                                         │
│      ├── CL3: キャンペーン企画 ───→ BC: CampaignPlanningContext                    │
│      │   └── Module: campaign-planning-service                                     │
│      │                                                                             │
│      ├── CL3: 広告配信管理 ───────→ BC: AdDeliveryContext                          │
│      │   └── Module: ad-delivery-service                                           │
│      │                                                                             │
│      └── CL3: 効果測定 ───────────→ BC: CampaignEffectContext                      │
│          └── Module: campaign-effect-service                                       │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

### 7.3 Bounded Context間の連携図（Context Map）

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              Context Map - 飲料メーカー                             │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│     【Core Domain - 製品開発】              【Core Domain - マーケティング】        │
│  ┌─────────────────────────┐            ┌─────────────────────────┐               │
│  │   RecipeDesignContext   │            │  CampaignPlanningContext │               │
│  │   ┌─────────────────┐   │            │  ┌─────────────────┐    │               │
│  │   │ Recipe          │   │ Upstream   │  │ Campaign        │    │               │
│  │   │ Ingredient      │   │ ─────────▶ │  │ TargetProduct   │    │               │
│  │   │ Specification   │   │ (OHS/PL)   │  │ Schedule        │    │               │
│  │   └─────────────────┘   │            │  └─────────────────┘    │               │
│  └───────────┬─────────────┘            └───────────┬─────────────┘               │
│              │                                      │                              │
│              │ Shared                               │ Customer-                    │
│              │ Kernel                               │ Supplier                     │
│              ▼                                      ▼                              │
│  ┌─────────────────────────┐            ┌─────────────────────────┐               │
│  │   SensoryEvalContext    │            │  ConsumerBehaviorContext │               │
│  │   ┌─────────────────┐   │ ACL        │  ┌─────────────────┐    │               │
│  │   │ EvaluationSession│  │ ←───────── │  │ ConsumerSegment │    │               │
│  │   │ Panelist        │   │            │  │ PurchasePattern │    │               │
│  │   │ Result          │   │            │  │ Preference      │    │               │
│  │   └─────────────────┘   │            │  └─────────────────┘    │               │
│  └───────────┬─────────────┘            └───────────┬─────────────┘               │
│              │                                      │                              │
│              └──────────────────┬───────────────────┘                              │
│                                 │                                                  │
│                                 ▼                                                  │
│     【Generic Domain - 共通基盤】                                                   │
│  ┌─────────────────────────────────────────────────────────────────────────────┐  │
│  │                         CustomerMasterContext                                │  │
│  │   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐            │  │
│  │   │ Customer        │  │ Product         │  │ Channel         │            │  │
│  │   │ Segment         │  │ Master          │  │ Master          │            │  │
│  │   │ History         │  │ Category        │  │ Partner         │            │  │
│  │   └─────────────────┘  └─────────────────┘  └─────────────────┘            │  │
│  │                                                                              │  │
│  │   全BC共通のマスターデータ提供（Conformist関係で参照）                       │  │
│  └─────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                     │
│  ─────────────────────────────────────────────────────────────────────────────────  │
│  【凡例】                                                                           │
│  ─────▶ : Upstream-Downstream（上流→下流）                                        │
│  ◀───── : ACL（腐敗防止層）で変換して取り込み                                      │
│  OHS/PL : Open Host Service / Published Language                                   │
│  Shared Kernel : 共有カーネル（共通モデル）                                        │
│  Conformist : 下流が上流のモデルに従う                                             │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

### 7.4 事業横断型アーキテクチャ（フュージョン型）

複数事業を持つ企業グループでのアーキテクチャ配置を示します。

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        事業横断型ビジネスアーキテクチャ（フュージョン型）            │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                      全社共通層（Generic Layer）                             │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │   │
│  │  │ VS0: 戦略   │  │ VS6: DX基盤 │  │ VS7: 業務改善│  │ 共通マスタ  │        │   │
│  │  │ 経営企画    │  │ データ統合  │  │ オペレーション│  │ 顧客/製品   │        │   │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘        │   │
│  └─────────┼───────────────┼───────────────┼───────────────┼────────────────────┘   │
│            │               │               │               │                        │
│            ├───────────────┴───────────────┴───────────────┤                        │
│            │            統合API / イベントバス              │                        │
│            └─────────────────┬─────────────────────────────┘                        │
│                              │                                                      │
│     ┌────────────────────────┼────────────────────────┐                            │
│     │                        │                        │                            │
│     ▼                        ▼                        ▼                            │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐                 │
│  │   酒類事業部      │  │   飲料事業部      │  │  健康食品事業部   │                 │
│  │  ┌────────────┐  │  │  ┌────────────┐  │  │  ┌────────────┐  │                 │
│  │  │VS1: 市場   │  │  │  │VS1: 市場   │  │  │  │VS1: 市場   │  │                 │
│  │  │成熟市場分析│  │  │  │トレンド分析│  │  │  │健康ニーズ  │  │                 │
│  │  ├────────────┤  │  │  ├────────────┤  │  │  ├────────────┤  │                 │
│  │  │VS2: 開発   │  │  │  │VS2: 開発   │  │  │  │VS2: 開発   │  │                 │
│  │  │発酵技術★  │  │  │  │健康機能★  │  │  │  │機能性研究★│  │                 │
│  │  ├────────────┤  │  │  ├────────────┤  │  │  ├────────────┤  │                 │
│  │  │VS3: 訴求   │  │  │  │VS3: 訴求   │  │  │  │VS3: 訴求   │  │                 │
│  │  │ブランド★  │  │  │  │健康訴求★  │  │  │  │エビデンス★│  │                 │
│  │  ├────────────┤  │  │  ├────────────┤  │  │  ├────────────┤  │                 │
│  │  │VS4: 流通   │  │  │  │VS4: 流通   │  │  │  │VS4: 流通   │  │                 │
│  │  │酒類流通    │  │  │  │自販機網    │  │  │  │通販・EC    │  │                 │
│  │  ├────────────┤  │  │  ├────────────┤  │  │  ├────────────┤  │                 │
│  │  │VS5: 支援   │  │  │  │VS5: 支援   │  │  │  │VS5: 支援   │  │                 │
│  │  │品質保証    │  │  │  │顧客対応    │  │  │  │健康相談    │  │                 │
│  │  └────────────┘  │  │  └────────────┘  │  │  └────────────┘  │                 │
│  │                  │  │                  │  │                  │                 │
│  │  ★=Core Domain  │  │  ★=Core Domain  │  │  ★=Core Domain  │                 │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘                 │
│                                                                                     │
│  ─────────────────────────────────────────────────────────────────────────────────  │
│  【事業横断シナジーポイント】                                                       │
│                                                                                     │
│  ① 顧客データ統合: 全事業の顧客を統合IDで管理 → クロスセル機会創出                │
│  ② 研究開発連携: 発酵技術×健康機能 → 機能性酒類の開発                            │
│  ③ 流通チャネル共有: 自販機網を健康食品にも活用                                   │
│  ④ ブランドシナジー: 企業ブランドの信頼性を各事業で活用                           │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

### 7.5 トレーサビリティマトリクス

Value StageからBCまでの追跡可能性を表形式で示します。

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                            トレーサビリティマトリクス                                │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│  VS     │ CL1           │ CL2              │ CL3              │ BC                 │
│  ───────┼───────────────┼──────────────────┼──────────────────┼──────────────────  │
│  VS2    │ 研究開発領域  │ 発酵技術研究     │ 酵母株選定       │ YeastScreening     │
│  製品   │ [Core]        │                  │ 発酵条件最適化   │ Fermentation       │
│  開発   │               │                  │ 香気成分分析     │ AromaAnalysis      │
│         │               ├──────────────────┼──────────────────┼──────────────────  │
│         │               │ 製品開発         │ レシピ設計       │ RecipeDesign       │
│         │               │                  │ 官能評価         │ SensoryEval        │
│         │               │                  │ 試作品管理       │ Prototype          │
│  ───────┼───────────────┼──────────────────┼──────────────────┼──────────────────  │
│  VS3    │ マーケティング│ ブランド管理     │ ブランド戦略     │ BrandStrategy      │
│  訴求   │ 領域 [Core]   │                  │ ブランド資産     │ BrandAsset         │
│         │               │                  │ パッケージ       │ PackageDesign      │
│         │               ├──────────────────┼──────────────────┼──────────────────  │
│         │               │ 消費者分析       │ 市場調査         │ MarketResearch     │
│         │               │                  │ 消費者行動       │ ConsumerBehavior   │
│         │               │                  │ トレンド分析     │ TrendAnalysis      │
│         │               ├──────────────────┼──────────────────┼──────────────────  │
│         │               │ キャンペーン     │ 企画             │ CampaignPlanning   │
│         │               │                  │ 広告配信         │ AdDelivery         │
│         │               │                  │ 効果測定         │ CampaignEffect     │
│  ───────┼───────────────┼──────────────────┼──────────────────┼──────────────────  │
│  VS4    │ サプライ      │ 在庫最適化       │ 需要予測         │ DemandForecast     │
│  流通   │ チェーン領域  │                  │ 在庫配置         │ InventoryAlloc     │
│         │ [Supporting]  ├──────────────────┼──────────────────┼──────────────────  │
│         │               │ 物流管理         │ 配送計画         │ DeliveryPlanning   │
│         │               │                  │ 輸送管理         │ Transportation     │
│  ───────┼───────────────┼──────────────────┼──────────────────┼──────────────────  │
│  VS6    │ 共通基盤領域  │ データ分析       │ 顧客分析         │ CustomerAnalytics  │
│  DX     │ [Generic]     │                  │ 売上分析         │ SalesAnalytics     │
│         │               ├──────────────────┼──────────────────┼──────────────────  │
│         │               │ マスター管理     │ 顧客マスタ       │ CustomerMaster     │
│         │               │                  │ 製品マスタ       │ ProductMaster      │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

### 7.6 投資判断マトリクス

CL2ケイパビリティの正式分類に基づく投資方針を示します。

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              投資判断マトリクス                                      │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│                           競争優位への貢献度                                        │
│                    低い                              高い                           │
│              ┌────────────────────────┬────────────────────────┐                   │
│              │                        │                        │                   │
│   複   高い  │    【効率化対象】      │    【差別化投資】      │                   │
│   雑         │                        │                        │                   │
│   性         │  ・プロセス標準化      │  ・自社開発            │                   │
│   ・         │  ・部分外注            │  ・重点投資            │                   │
│   投         │  ・パッケージ導入      │  ・内製化              │                   │
│   資         │                        │  ・専門人材確保        │                   │
│   規         │  例: 物流管理          │  例: 発酵技術研究      │                   │
│   模         │      品質検査          │      ブランド管理      │                   │
│              │      顧客対応          │      消費者分析        │                   │
│              │                        │                        │                   │
│              ├────────────────────────┼────────────────────────┤                   │
│              │                        │                        │                   │
│         低い │    【標準化/外部化】   │    【選択的投資】      │                   │
│              │                        │                        │                   │
│              │  ・SaaS活用            │  ・段階的内製化        │                   │
│              │  ・アウトソーシング    │  ・パートナー活用      │                   │
│              │  ・業界標準採用        │  ・機会を見て投資      │                   │
│              │                        │                        │                   │
│              │  例: 経理・人事        │  例: EC基盤            │                   │
│              │      IT基盤            │      データ分析基盤    │                   │
│              │      マスター管理      │                        │                   │
│              │                        │                        │                   │
│              └────────────────────────┴────────────────────────┘                   │
│                                                                                     │
│  ─────────────────────────────────────────────────────────────────────────────────  │
│  【CL2正式分類との対応】                                                            │
│                                                                                     │
│  ┌─────────────┬───────────────────┬──────────────────────────────────────────┐   │
│  │ 分類        │ 象限              │ 推奨アプローチ                          │   │
│  ├─────────────┼───────────────────┼──────────────────────────────────────────┤   │
│  │ Core        │ 差別化投資        │ 自社開発、独自システム構築              │   │
│  │ Supporting  │ 効率化対象        │ パッケージ+カスタマイズ、部分外注       │   │
│  │ Generic     │ 標準化/外部化     │ SaaS、フルアウトソーシング              │   │
│  └─────────────┴───────────────────┴──────────────────────────────────────────┘   │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 8. ZIGZAGプロセス

### 基本概念

ZIGZAGは「視座転換による創発的分解」プロセスです。WHAT（何を実現するか）とHOW（どう実現するか）を層間で往復しながら設計を深化させます。

```
┌─────────────────────────────────────────────────────────────────────┐
│                      ZIGZAG Process                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  L1 Business Layer                                                  │
│  ┌──────────────┐                                                   │
│  │ WHAT: 何を   │──┐                                               │
│  │ 実現するか   │  │                                               │
│  └──────────────┘  │                                               │
│                    │ ZIG (詳細化)                                   │
│                    ▼                                               │
│  L2 Service Layer                                                   │
│  ┌──────────────┐  ┌──────────────┐                                │
│  │ HOW: どう   │  │ WHAT: 何を   │──┐                             │
│  │ 実現するか  │  │ 提供するか   │  │                             │
│  └──────────────┘  └──────────────┘  │                             │
│         ▲                            │ ZAG (詳細化)                 │
│         │ フィードバック             ▼                             │
│  L3 Implementation Layer                                            │
│  ┌──────────────┐  ┌──────────────┐                                │
│  │ 制約・気づき │  │ HOW: どう   │                                │
│  │ の報告      │  │ 実装するか  │                                │
│  └──────────────┘  └──────────────┘                                │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### フェーズとZIGZAGの対応

| フェーズ | レベル | WHAT/HOW | 成果物 |
|----------|--------|----------|--------|
| Phase 1-2 | L1 | WHAT | ビジョン、価値定義 |
| Phase 3 | L1→L2 | ZIG | CL1→CL2分解 |
| Phase 4 | L2 | WHAT/HOW | アーキテクチャ設計 |
| Phase 5 | L2→L3 | ZAG | CL3→モジュール設計 |
| Phase 6 | L3 | HOW | 実装詳細 |

### フィードバックループ

実装層（L3）での発見は上位層にフィードバックされ、必要に応じて設計を修正します。

```
発見例:
- 「このAPI設計では性能要件を満たせない」→ L2サービス設計の見直し
- 「この業務フローには例外ケースがある」→ L1業務要件の補完
```

**ソース:** `_zigzag-process.md`

---

## 9. 7つのフェーズ

### フェーズ概要

```
Phase 0: 初期化          - プロジェクト設定、URL起動
Phase 1: コンテキスト分析 - 業界・企業分析、As-Is理解
Phase 2: 価値定義        - ビジョン、ミッション、VS定義
Phase 3: ケイパビリティ分解 - CL1→CL2→CL3の3段階分解
Phase 4: アーキテクチャ設計 - ソフトウェアアーキテクチャ
Phase 5: ソフトウェア設計 - モジュール、API設計
Phase 6: 実装           - コード実装
Phase 7: プラットフォーム - インフラ、デプロイ設計
```

### 各フェーズの成果物

| Phase | 主要成果物 | 説明 |
|-------|-----------|------|
| 0 | `parasol.yaml` | プロジェクト設定ファイル |
| 1 | `industry-segment-profile.md`, `context-analysis.md` | 業界分析、コンテキスト |
| 2 | `value-definition.md`, `vs-definition.md` | 価値・VS定義 |
| 3 | `cl1-domains.md`, `cl2-capabilities.md`, `cl3-operations.md` | ケイパビリティ階層 |
| 4 | `architecture-overview.md`, `architecture-decisions.md` | アーキテクチャ設計 |
| 5 | `module-design.md`, `api-contracts.md` | ソフトウェア設計 |
| 6 | 実装コード | 実装成果物 |
| 7 | `infrastructure.md`, `deployment.md` | インフラ設計 |

### フェーズ間の依存関係

```
Phase 0 ─────────────────────────────────────────────┐
    │                                                │
    ▼                                                │
Phase 1 (Context)                                    │
    │                                                │
    ▼                                                │ プロジェクト
Phase 2 (Value) ◀────── バックキャスティング        │ ライフサイクル
    │                                                │
    ▼                                                │
Phase 3 (Capability) ◀── VS-Swimlaneモデル          │
    │                                                │
    ├────────────────────┐                           │
    ▼                    ▼                           │
Phase 4 (Arch)      Phase 7 (Platform)               │
    │                    │                           │
    ▼                    │                           │
Phase 5 (SW Design) ◀────┘                           │
    │                                                │
    ▼                                                │
Phase 6 (Implementation) ────────────────────────────┘
```

**ソース:** `_parasol-overview.md`, `0-help.md`

---

## 10. ソースファイル一覧

### コア概念ドキュメント

| ファイル | 内容 | 行数 |
|----------|------|------|
| `_parasol-overview.md` | フレームワーク全体概要、VS-Swimlaneモデル | 412 |
| `_parasol-architecture-overview.md` | 3層アーキテクチャ、追跡可能性 | 165 |
| `_value-methodology.md` | VS定義、バックキャスティング | 789 |
| `_zigzag-process.md` | ZIGZAGプロセス、WHAT-HOWパターン | 424 |

### パターン・ナレッジ

| ファイル | 内容 | 行数 |
|----------|------|------|
| `decomposition-patterns.md` | CL1-CL3分解パターン | 288 |
| `value-axis.md` | 価値軸パターン | - |
| `business-unit-axis.md` | 事業部軸パターン | 122 |
| `capability-axis.md` | ケイパビリティ統合型パターン | 158 |
| `fusion-axis.md` | フュージョン型パターン | 146 |
| `multi-tier-vstr-axis.md` | 多段VStrパターン | - |

### コマンド・ヘルプ

| ファイル | 内容 |
|----------|------|
| `0-help.md` | ヘルプシステム、概念説明、DDDマッピング |
| `0-init.md` | URL起動型初期化 |
| `0-project.md` | プロジェクト管理 |
| `0-status.md` | ステータス確認 |
| `0-validate.md` | バリデーション |
| `1-context.md` | Phase 1 コンテキスト分析 |
| `2-value.md` | Phase 2 価値定義 |
| `3-capabilities.md` | Phase 3 ケイパビリティ分解 |
| `4-architecture.md` | Phase 4 アーキテクチャ設計 |
| `5-software.md` | Phase 5 ソフトウェア設計 |
| `6-implementation.md` | Phase 6 実装 |
| `7-platform.md` | Phase 7 プラットフォーム設計 |

---

## 付録: クイックリファレンス

### 用語集

| 用語 | 定義 |
|------|------|
| VStr (Value Stream) | 顧客価値を創造・提供する一連の活動フロー全体 |
| VS (Value Stage) | Value Streamを構成する個々の段階（VS0-VS7） |
| CL1 | Domain Classification - ドメインの大分類 |
| CL2 | Capability - 具体的な組織能力 |
| CL3 | Operation - 操作レベルの実装単位 |
| BC | Bounded Context - 境界づけられたコンテキスト |
| ZIGZAG | WHAT-HOW往復による創発的分解プロセス |
| Backcasting | 理想の未来から逆算する計画手法 |

### よく使うコマンド

```bash
# プロジェクト初期化
/parasol:0-init <company-url>

# ステータス確認
/parasol:0-status

# 各フェーズ実行
/parasol:1-context
/parasol:2-value
/parasol:3-capabilities
/parasol:4-architecture
/parasol:5-software
/parasol:6-implementation
/parasol:7-platform

# バリデーション
/parasol:0-validate
```

---

**このドキュメントについて**

本ドキュメントは以下のソースファイルから情報を統合して作成されました：
- `.claude/commands/parasol/_parasol-overview.md`
- `.claude/commands/parasol/_parasol-architecture-overview.md`
- `.claude/commands/parasol/_value-methodology.md`
- `.claude/commands/parasol/_zigzag-process.md`
- `.claude/commands/parasol/_capability-knowledge/patterns/decomposition-patterns.md`
- `.claude/commands/parasol/0-help.md`
- その他関連ファイル

詳細は各ソースファイルを参照してください。
