# VC完全性バリデータ（V5.6）
# VC Completeness Validator
#
# 用途: VL3のVC構成が完全かどうかを検証
# バージョン: V5.6
# 作成日: 2026-01-14

# ============================================================
# 検証ルール
# ============================================================
validator:
  name: "VC Completeness Validator"
  version: "1.0"
  target: "vl3-vc-analysis.yaml"

  rules:
    # ============================================================
    # Rule 1: 全VL3にVC構成があるか
    # ============================================================
    - id: "VC-001"
      name: "VL3 VC Coverage"
      severity: "error"
      description: "すべてのVL3にVC構成が定義されていること"
      check: |
        各VL3エントリに対して:
        - value_components セクションが存在する
        - VC1〜VC5の5つすべてが定義されている
      fix: "未定義のVL3に対してVC構成を追加する"

    # ============================================================
    # Rule 2: 少なくとも1つの主要VC（★★★）があるか
    # ============================================================
    - id: "VC-002"
      name: "Primary VC Exists"
      severity: "error"
      description: "各VL3に少なくとも1つの主要VC（★★★）があること"
      check: |
        各VL3のvalue_componentsに対して:
        - importance: "★★★" を持つVCが1つ以上存在する
      fix: "主要VCを特定し、★★★を設定する"

    # ============================================================
    # Rule 3: VCパターンが設定されているか
    # ============================================================
    - id: "VC-003"
      name: "VC Pattern Defined"
      severity: "error"
      description: "各VL3にVCパターンが定義されていること"
      check: |
        各VL3に対して:
        - vc_pattern.type が有効な値である
        - 有効値: 製品主導型, サービス主導型, 体験主導型, 関係主導型, 情報主導型, バランス型
      fix: "VCパターンを判定し設定する"

    # ============================================================
    # Rule 4: primary_vcとimportanceの整合性
    # ============================================================
    - id: "VC-004"
      name: "Primary VC Consistency"
      severity: "warning"
      description: "vc_pattern.primary_vcと★★★のVCが一致すること"
      check: |
        各VL3に対して:
        - vc_pattern.primary_vc に含まれるVCは importance: "★★★" であること
      fix: "primary_vcまたはimportanceを修正して整合性を取る"

    # ============================================================
    # Rule 5: VCパターンとprimary_vcの整合性
    # ============================================================
    - id: "VC-005"
      name: "Pattern Type Consistency"
      severity: "warning"
      description: "VCパターンタイプとprimary_vcが整合すること"
      check: |
        vc_pattern.type に応じて:
        - 製品主導型 → primary_vc に "VC1" を含む
        - サービス主導型 → primary_vc に "VC2" を含む
        - 体験主導型 → primary_vc に "VC3" を含む
        - 関係主導型 → primary_vc に "VC4" を含む
        - 情報主導型 → primary_vc に "VC5" を含む
        - バランス型 → primary_vc に複数VCを含む
      fix: "パターンタイプまたはprimary_vcを修正"

    # ============================================================
    # Rule 6: サブコンポーネントの妥当性
    # ============================================================
    - id: "VC-006"
      name: "Sub-component Validity"
      severity: "warning"
      description: "指定されたサブコンポーネントが有効であること"
      check: |
        各VCのsub_componentに対して:
        - VC1: VC1-1(機能), VC1-2(品質), VC1-3(多様性)
        - VC2: VC2-1(アクセス), VC2-2(価格), VC2-3(安定性)
        - VC3: VC3-1(購買), VC3-2(利用), VC3-3(所有)
        - VC4: VC4-1(信頼), VC4-2(帰属), VC4-3(継続)
        - VC5: VC5-1(知識), VC5-2(発見), VC5-3(共有)
      fix: "有効なサブコンポーネントIDを使用する"

# ============================================================
# 検証結果テンプレート
# ============================================================
result_template:
  summary:
    total_vl3: 0
    passed: 0
    failed: 0
    warnings: 0

  details:
    - vl3_id: ""
      rules:
        - rule_id: ""
          status: "pass | fail | warning"
          message: ""

# ============================================================
# 使用方法
# ============================================================
# 1. vl3-vc-analysis.yaml を読み込む
# 2. 各ルールを順に適用
# 3. 結果をresult_templateに記録
# 4. サマリーを出力
#
# 実行コマンド（予定）:
# /parasol:validate vc-completeness
# ============================================================
