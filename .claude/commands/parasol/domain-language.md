# /parasol:domain-language - ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã‚³ãƒãƒ³ãƒ‰

## æ¦‚è¦

ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã®å®šç¾©ã‚’ä½œæˆãƒ»æ›´æ–°ãƒ»æ¤œè¨¼ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚Phase 4-5ã§å®šç¾©ã•ã‚ŒãŸBounded Contextã«å¯¾ã—ã¦ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£éä¾å­˜ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«å®šç¾©ã‚’ä½œæˆã—ã¾ã™ã€‚

## ğŸ”— VL/CL/VMSã¨ã®é–¢ä¿‚

ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã¯ã€ä¾¡å€¤ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ãƒã‚§ãƒ¼ãƒ³ã®ä¸€éƒ¨ã¨ã—ã¦ä½ç½®ã¥ã‘ã‚‰ã‚Œã¾ã™ã€‚

### å…¨ä½“ã§ã®ä½ç½®ã¥ã‘

```
VL1ï¼ˆæœ€ä¸Šä½ä¾¡å€¤ï¼‰
  â†“ åˆ†è§£
VL2 â†’ VL3 â†’ VMSï¼ˆä¾¡å€¤ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ï¼‰
              â†“ å®Ÿç¾
        VSï¼ˆãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆãƒªãƒ¼ãƒ ï¼‰
              â†“ åˆ†è§£
        CL1ï¼ˆæ´»å‹•é ˜åŸŸè­˜åˆ¥ï¼‰
              â†“
        CL2ï¼ˆã‚±ã‚¤ãƒ‘ãƒ“ãƒªãƒ†ã‚£è¨­è¨ˆï¼‰
              â†“
        CL3ï¼ˆæ¥­å‹™ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
              â†“ Phase 4-5ã§å¢ƒç•Œç¢ºå®š
        Bounded Context
              â†“ â˜…ã“ã“ã§ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã‚’é©ç”¨
        ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªå®šç¾©
              â†“ ç”Ÿæˆ
        UI / API / DB
```

### ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã®ä¾¡å€¤ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã¨ä¾¡å€¤ã®é€£é–                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ã€VL3: è©³ç´°ä¾¡å€¤ã€‘                                                  â”‚
â”‚  ã€Œç³–è³ª30%ã‚ªãƒ•ãƒ“ãƒ¼ãƒ«ã€                                              â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”‚ ãƒˆãƒ¬ãƒ¼ã‚¹                                                    â”‚
â”‚       â–¼                                                             â”‚
â”‚  ã€VMS2: é¡§å®¢ãŒä¾¡å€¤ã‚’èªè­˜ã—é¸æŠã§ãã‚‹çŠ¶æ…‹ã€‘                         â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”‚ å®Ÿç¾                                                        â”‚
â”‚       â–¼                                                             â”‚
â”‚  ã€VS: å•†å“é–‹ç™ºãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆãƒªãƒ¼ãƒ ã€‘                                 â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”‚ åˆ†è§£                                                        â”‚
â”‚       â–¼                                                             â”‚
â”‚  ã€BC: å•†å“ä¼ç”»BCã€‘ï¼ˆPhase 4-5ã§å®šç¾©ï¼‰                              â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”‚ ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªå®šç¾©                                    â”‚
â”‚       â–¼                                                             â”‚
â”‚  Aggregate: Product                                                 â”‚
â”‚  â”œâ”€ Property: nutritionInfo (NutritionValue)                        â”‚
â”‚  â”œâ”€ Invariant: "ç³–è³ªã¯åŸºæº–è£½å“ã®70%ä»¥ä¸‹ã§ã‚ã‚‹ã“ã¨"                  â”‚
â”‚  â””â”€ Behavior: calculateSugarReduction()                             â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”‚ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ                                                  â”‚
â”‚       â–¼                                                             â”‚
â”‚  ã€å®Ÿè£…ã€‘                                                           â”‚
â”‚  â”œâ”€ API: POST /products (ç³–è³ªæ¤œè¨¼å«ã‚€)                              â”‚
â”‚  â”œâ”€ DB: nutrition_info JSONB (åˆ¶ç´„ä»˜ã)                             â”‚
â”‚  â””â”€ UI: ç³–è³ªè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ                                      â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾¡å€¤ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ã®ç¢ºèª

ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã‚’å®šç¾©ã™ã‚‹éš›ã€ä»¥ä¸‹ã®ä¾¡å€¤é€£é–ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

| ç¢ºèªé …ç›® | è³ªå• | æ ¹æ‹  |
|---------|------|------|
| VL3ã¨ã®ç´ä»˜ã‘ | ã“ã®BCã¯ã©ã®VL3ã‚’å®Ÿç¾ã™ã‚‹ã‹ï¼Ÿ | value-hierarchy.md |
| VMSã¨ã®å¯¾å¿œ | ã©ã®VMSã®é”æˆã«è²¢çŒ®ã™ã‚‹ã‹ï¼Ÿ | vms-definitions.md |
| VSã¨ã®æ•´åˆ | ã©ã®ãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«å±ã™ã‚‹ã‹ï¼Ÿ | Phase 2æˆæœç‰© |
| CL3ã¨ã®ä¸€è‡´ | CL3å®šç¾©ã¨çŸ›ç›¾ãŒãªã„ã‹ï¼Ÿ | Phase 3æˆæœç‰© |

**é‡è¦**: ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã§å®šç¾©ã•ã‚Œã‚‹Invariantsï¼ˆä¸å¤‰æ¡ä»¶ï¼‰ã‚„Behaviorsï¼ˆæŒ¯ã‚‹èˆã„ï¼‰ã¯ã€VL3ã§å®šç¾©ã•ã‚ŒãŸé¡§å®¢ä¾¡å€¤ã‚’ç›´æ¥åæ˜ ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã®ä¾¡å€¤ç¢ºèª

```bash
/parasol:domain-language create vs2-product-innovation fermentation-research-bc

# å®Ÿè¡Œæ™‚ã«ä»¥ä¸‹ã‚’è‡ªå‹•ç¢ºèª:
âœ… VL3ç´ä»˜ã‘: VL3-2-1ã€Œç™ºé…µæŠ€è¡“ã«ã‚ˆã‚‹å·®åˆ¥åŒ–ã€
âœ… VMSå¯¾å¿œ: VMS2ï¼ˆé¡§å®¢ãŒä¾¡å€¤ã‚’èªè­˜ã—é¸æŠã§ãã‚‹çŠ¶æ…‹ï¼‰
âœ… VSæ•´åˆ: VS2ã€Œå•†å“é–‹ç™ºã€
âœ… CL3ä¸€è‡´: fermentation-research-bcå®šç¾©ã¨æ•´åˆ

â†’ ä¾¡å€¤ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ç¢ºèªå®Œäº†
```

## ä½¿ç”¨æ–¹æ³•

```bash
# åŸºæœ¬çš„ãªä½¿ã„æ–¹
/parasol:domain-language [action] [options]

# ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
create   # æ–°è¦ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªå®šç¾©ã‚’ä½œæˆ
update   # æ—¢å­˜ã®å®šç¾©ã‚’æ›´æ–°
validate # å®šç¾©ã®æ•´åˆæ€§ã‚’æ¤œè¨¼
generate # UI/API/DBã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
```

## å‰ææ¡ä»¶

- Phase 4-5ã®Bounded Contextå®šç¾©ãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒParasolã§åˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨

## ã‚³ãƒãƒ³ãƒ‰è©³ç´°

### 1. create - æ–°è¦ä½œæˆ

```bash
/parasol:domain-language create [VSå] [BCå]
```

**ä¾‹:**
```bash
/parasol:domain-language create vs2-product-innovation fermentation-research-bc
```

**ç”Ÿæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
```
outputs/5-software/{service}/{bc-name}/
â””â”€â”€ domain-language.md              # ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªï¼ˆSSOTï¼‰

# å‚ç…§å…ƒï¼ˆPhase 3 CL3å®šç¾©ï¼‰:
outputs/3-capabilities/{vs}/cl3-business-operations/
â””â”€â”€ {capability}-operations.md      # ãƒ“ã‚¸ãƒã‚¹ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©
```

### 2. update - æ›´æ–°

```bash
/parasol:domain-language update [VSå] [BCå]
```

æ—¢å­˜ã®ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªå®šç¾©ã‚’æ›´æ–°ã—ã¾ã™ã€‚

### 3. validate - æ¤œè¨¼

```bash
/parasol:domain-language validate [VSå] [BCå]
```

**æ¤œè¨¼é …ç›®:**
- Aggregateã®ä¸å¤‰æ¡ä»¶
- Value Objectsã®å‹å®šç¾©
- Domain Eventsã®æ•´åˆæ€§
- Repositoriesã®ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©
- ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªã®ä¸€è²«æ€§

### 4. generate - ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ

```bash
/parasol:domain-language generate [VSå] [BCå] [target]

# target options:
# - ui     # UIå±¤ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
# - api    # APIå±¤ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
# - db     # DBå±¤ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
# - all    # å…¨å±¤ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
```

**ä¾‹:**
```bash
# å…¨å±¤ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
/parasol:domain-language generate vs2-product-innovation fermentation-research-bc

# APIå±¤ã®ã¿ç”Ÿæˆ
/parasol:domain-language generate vs2-product-innovation fermentation-research-bc api
```

## ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã®æ§‹é€ 

### 1. Aggregatesï¼ˆé›†ç´„ï¼‰

```yaml
Root Entity: {EntityName}
Description: {èª¬æ˜}

Properties:
  - {propertyName}: {Type} ({èª¬æ˜})

Invariants:
  - {ä¸å¤‰æ¡ä»¶}

Behaviors:
  - {methodName}(): {èª¬æ˜}
```

### 2. Value Objectsï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰

```yaml
{ValueObjectName}:
  Type: {å‹}
  Validation: {æ¤œè¨¼ãƒ«ãƒ¼ãƒ«}
  Format: {ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ}
```

### 3. Domain Eventsï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆï¼‰

```yaml
{EventName}:
  Description: {èª¬æ˜}
  Properties:
    - {property}: {Type}
  Trigger: {ç™ºç”Ÿæ¡ä»¶}
  Subscribers: [{BCå}]
  VSé–“: Yes/No
```

### 4. Domain Servicesï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ï¼‰

```yaml
Responsibility: {è²¬å‹™}
Methods:
  - {methodName}({params}):
      Input: {å…¥åŠ›}
      Output: {å‡ºåŠ›}
      Logic: {ãƒ­ã‚¸ãƒƒã‚¯æ¦‚è¦}
```

### 5. Repositoriesï¼ˆãƒªãƒã‚¸ãƒˆãƒªï¼‰

```yaml
Methods:
  - save({entity}: {Type}): void
  - findById(id: {IdType}): {EntityType}
  - {domainSpecificMethod}(): {ReturnType}
```

### 6. ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªè¾æ›¸

| æ—¥æœ¬èª | è‹±èª | å®šç¾© |
|--------|------|------|
| {ç”¨èª} | {Term} | {å®šç¾©} |

## ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã®ä¾‹

### UIå±¤ï¼ˆReact/TypeScriptï¼‰

```typescript
// è‡ªå‹•ç”Ÿæˆ: YeastStrain Form Component
interface YeastStrainForm {
  strainCode: string; // Format: ASH-YYYY-NNNN
  name: string;       // 1-100æ–‡å­—
  
  validate(): ValidationResult {
    // Invariantsã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  }
}
```

### APIå±¤ï¼ˆFastAPI/Pythonï¼‰

```python
# è‡ªå‹•ç”Ÿæˆ: YeastStrain API
@router.post("/strains")
async def register_strain(dto: RegisterStrainDto):
    # Behaviorsã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
    # Invariantsã®ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«é©ç”¨
```

### DBå±¤ï¼ˆPostgreSQLï¼‰

```sql
-- è‡ªå‹•ç”Ÿæˆ: YeastStrain Table
CREATE TABLE yeast_strains (
  strain_id UUID PRIMARY KEY,
  strain_code VARCHAR(20) UNIQUE,
  -- Value Objectåˆ¶ç´„ã®é©ç”¨
  CONSTRAINT strain_code_format 
    CHECK (strain_code ~ '^ASH-\d{4}-\d{4}$')
);
```

## ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. **Phase 3ã§CL3å®šç¾©ã‚’å®Œäº†**
   ```bash
   /parasol:3-capabilities cl3 {vs-name} {subdomain-name}
   ```

2. **ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã‚’ä½œæˆ**
   ```bash
   /parasol:domain-language create {vs-name} {bc-name}
   ```

3. **å®šç¾©ã‚’ç·¨é›†ãƒ»æ´—ç·´**
   - ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹å‹•ã§ç·¨é›†
   - ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ 

4. **æ¤œè¨¼**
   ```bash
   /parasol:domain-language validate {vs-name} {bc-name}
   ```

5. **ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**
   ```bash
   /parasol:domain-language generate {vs-name} {bc-name}
   ```

## æ³¨æ„äº‹é …

1. **åç§°ã®ä¸€è²«æ€§**: å¿…ãšã€Œãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã€ã¨å‘¼ç§°
2. **DDDã¨ã®åŒºåˆ¥**: DDDã®ã€Œãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªã€ã¨ã¯ç•°ãªã‚‹æ¦‚å¿µ
3. **å†ç”Ÿæˆå¯èƒ½æ€§**: ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯ç›´æ¥ç·¨é›†ã›ãšã€å¸¸ã«å®šç¾©ã‹ã‚‰å†ç”Ÿæˆ
4. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: ãƒ‘ãƒ©ã‚½ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³è¨€èªå®šç¾©ã®ã¿ã‚’Gitç®¡ç†

## é–¢é€£ã‚³ãƒãƒ³ãƒ‰

- `/parasol:3-capabilities` - CL3å®šç¾©ã®ä½œæˆ
- `/parasol:5-software-design` - ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è¨­è¨ˆï¼ˆãƒ‘ãƒ©ã‚½ãƒ«è¨­è¨ˆï¼‰
- `/parasol:validate` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æ¤œè¨¼

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: "CL3å®šç¾©ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"

Phase 3ã®CL3å®šç¾©ã‚’å…ˆã«å®Œäº†ã—ã¦ãã ã•ã„:
```bash
/parasol:3-capabilities cl3 {vs-name} {subdomain-name}
```

### ã‚¨ãƒ©ãƒ¼: "å‹å®šç¾©ãŒä¸æ•´åˆã§ã™"

Value Objectsã®å‹å®šç¾©ã‚’ç¢ºèªã—ã€ä¸€è²«æ€§ã‚’ä¿ã£ã¦ãã ã•ã„ã€‚

---

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…æº–å‚™ä¸­
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: V5å¯¾å¿œ