# パラソルアーキテクチャ概要

## 3層構造の中心概念

```
┌─────────────────────────────────────┐
│      上位層：価値（Value）           │
│    価値の流れ（Value Streams）       │
│         がパラソルの中心             │
└─────────────────────────────────────┘
                ↓
┌─────────────────────────────────────┐
│   中間層：ケーパビリティ（Capability）│
│    組織能力の定義と分解              │
│     CL1→CL2→CL3の階層              │
└─────────────────────────────────────┘
                ↓
┌─────────────────────────────────────┐
│  下位層：ソフトウェア（Software）     │
│   Bounded Context内の               │
│   パラソルドメイン言語が中心         │
└─────────────────────────────────────┘
```

## 各層の詳細

### 1. 上位層：価値中心（Value-Centric）

**Phase 0-2: Foundation**
- Phase 0: 初期化（企業理解）
- Phase 1: Context（ステークホルダー、制約）
- Phase 2: **Value Streams** ← 価値がパラソルの中心

```
価値の流れ（Value Streams）
├── VS0: 経営管理（全体統括）
├── VS1: 研究開発（価値創造）
├── VS2: 商品企画（価値設計）
├── VS3: 原材料調達（価値調達）
├── VS4: 製造（価値生産）
├── VS5: 物流（価値配送）
├── VS6: マーケティング（価値伝達）
└── VS7: 販売（価値提供）
```

**特徴**：
- ビジネス価値の流れを可視化
- 組織全体の価値創造プロセスを理解
- どこで価値が生まれ、どう流れるかが明確

### 2. 中間層：ケーパビリティ中心（Capability-Centric）

**Phase 3: Capabilities**
- CL1: Activity Area Identification（活動領域識別）
  - Core / Supporting / Generic の**傾向的分類**（参考情報）
- CL2: Capability Design（ケイパビリティ設計）
  - **正式分類**（Core/Supporting/Generic）・投資判断根拠
- CL3: 詳細分解（≈Business Operation）
  - 業務の詳細化（分類なし・網羅性重視）
- BC: Bounded Context（境界コンテキスト）
  - CL2の分類を継承・実装単位の境界定義

```
ケーパビリティの分解例（VS2）
VS2: 商品企画・開発
├── 市場調査・分析（Core）
├── 商品コンセプト開発（Core）
├── プロトタイプ開発（Core）
├── 商品仕様策定（Supporting）
└── 開発プロジェクト管理（Generic）
```

**特徴**：
- 組織が持つべき能力を明確化
- 投資優先順位の決定（Core 70%、Supporting 25%、Generic 5%）
- ビジネスとITの架け橋

### 3. 下位層：ソフトウェア中心（Software-Centric）

**Phase 4-7: Implementation**
- Phase 4: Application Design（マイクロサービス分割）
- Phase 5: Software Design（パラソル設計）
- Phase 6: Execution（実行環境）
- Phase 7: Platform（プラットフォーム）

```
Bounded Context内の構造
BC: fermentation-research-bc
├── ビジネス定義（.md）
└── パラソルドメイン言語定義（-domain-language.md）← 中心
    ├── Aggregates（集約）
    ├── Value Objects（値オブジェクト）
    ├── Domain Events（ドメインイベント）
    ├── Domain Services（ドメインサービス）
    ├── Repositories（リポジトリ）
    └── ユビキタス言語辞書
         ↓ 自動生成
    ├── UI層
    ├── API層
    └── DB層
```

**特徴**：
- パラソルドメイン言語が Single Source of Truth
- すべての実装は言語定義から自動生成
- 一貫性と保守性の保証

## 層間の関係性

### 価値 → ケーパビリティ
```
価値の流れ（What）
    ↓ 分解
必要な能力（How）
```

### ケーパビリティ → ソフトウェア
```
組織能力（Business）
    ↓ 実装
技術実現（Technology）
```

## パラソルの統一原則

1. **トレーサビリティ**
   - 価値 → ケーパビリティ → ソフトウェアの追跡可能性
   - 変更の影響範囲が明確

2. **整合性**
   - 上位の価値定義と下位の実装が常に一致
   - パラソルドメイン言語による一貫性保証

3. **進化可能性**
   - ビジネス変化に応じて各層を独立に進化
   - 影響を最小化した変更が可能

## 実例：アサヒグループの場合

### 上位層（価値）
- VS2: 商品企画・開発 → **ビールの新商品開発価値**

### 中間層（ケーパビリティ）
- 発酵研究（Core）
- 原料研究（Core）
- パッケージ開発（Supporting）

### 下位層（ソフトウェア）
- fermentation-research-bc
  - パラソルドメイン言語で酵母株管理を定義
  - UI/API/DBを自動生成

## まとめ

パラソルは各層で異なる中心概念を持ちながら、全体として一貫したアーキテクチャを提供：

- **上位**：価値の流れを理解し、ビジネスを可視化
- **中間**：必要な能力を定義し、投資を最適化
- **下位**：パラソルドメイン言語により、一貫したソフトウェアを実現

これにより、ビジネスからITまでの完全なトレーサビリティと、AI駆動開発の基盤を提供します。

---

**作成日**: 2025-11-28
**バージョン**: V5
**ステータス**: ドラフト