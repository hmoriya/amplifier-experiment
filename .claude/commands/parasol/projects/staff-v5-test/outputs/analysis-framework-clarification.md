# Parasol V5 分析フレームワーク - 抽象度・視点・工程の整理

## 🎯 3つの軸の整理

### 1. 抽象度（Abstraction Level）
垂直方向の階層 - より抽象的から具体的へ

```
高抽象度
    ↑
    │  企業全体
    │  ├─ Value Stream（価値の流れ）
    │  │
    │  事業単位  
    │  ├─ CL1: ドメイン（活動領域）
    │  │
    │  チーム単位
    │  ├─ CL2: サブドメイン ≈ BC ≈ マイクロサービス
    │  │
    │  機能単位
    │  ├─ CL3: 詳細能力 → BO: 業務オペレーション
    │  │
    │  操作単位
    │  ├─ Actor UseCase（ユーザストーリー）
    │  │
    │  画面単位
    │  └─ View（タスク）
    ↓
低抽象度
```

### 2. 視点（Perspective）
同じ抽象度レベルでの異なる見方

```
ビジネス視点          技術視点              運用視点
    │                    │                    │
    ├─ VS ────────────> VS ────────────> VS
    │                    │                    │
    ├─ CL1 ───────────> CL1 ───────────> CL1
    │                    │                    │
    ├─ CL2 ───────────> BC ────────────> マイクロサービス
    │  (能力群)          (技術境界)          (デプロイ単位)
    │                    │                    │
    └─ CL3 ───────────> 集約 ──────────> API/バッチ
       (業務活動)        (データモデル)      (実行単位)
```

### 3. 工程（Process Phase）
時間軸での進行 - 分析から設計、実装へ

```
Phase 1-2          Phase 3              Phase 4              Phase 5-6
コンテキスト    →  ビジネス設計    →  アーキテクチャ設計  →  実装設計
(Context)         (Business)          (Architecture)        (Implementation)
    │                 │                    │                    │
    ├─ 価値定義       ├─ 能力分解          ├─ 技術境界          ├─ 詳細設計
    ├─ VS定義         ├─ CL1/CL2/CL3      ├─ BC定義            ├─ DB設計
    └─ 戦略分析       └─ 業務分析          └─ サービス設計      └─ API設計
```

## 📊 統合マトリックス

### Phase × 視点 × 抽象度

| Phase | 主要視点 | 抽象度 | 成果物 | 決定事項 |
|-------|----------|--------|--------|----------|
| **Phase 1-2** | 価値・戦略 | 最高（企業全体） | VL1-3, VS | 何の価値を届けるか |
| **Phase 3** | ビジネス | 高〜中（事業〜機能） | CL1/CL2/CL3 | どんな能力が必要か |
| **Phase 4** | 技術 | 中（チーム単位） | BC, Context Map | どう技術的に分割するか |
| **Phase 5-6** | 実装 | 低（詳細設計） | DB, API, Code | どう実装するか |

## 🔄 視点の変換ポイント

### Phase 3 → Phase 4 の変換
**ビジネス視点から技術視点への転換**

```
Phase 3（ビジネス設計）           Phase 4（アーキテクチャ設計）
    │                                │
    ├─ CL2: 人材獲得能力    ────>    ├─ BC: 人材管理コンテキスト
    │  - 登録・審査・評価             │  - 人材エンティティ
    │  - ビジネス観点                 │  - 技術的凝集性
    │                                │
    └─ CL3: 登録能力 → BO ──>         └─ 集約: 応募者集約
       - 業務フロー                      - データ整合性
       - アクター協調                    - トランザクション境界
```

## 🎨 分析の進行パターン

### 1. トップダウン進行（推奨）
```
価値（なぜ）→ 能力（何を）→ 技術（どう）→ 実装（具体的に）
```

### 2. 視点の切り替えタイミング
- **Phase 2→3**: 価値視点 → ビジネス視点
- **Phase 3→4**: ビジネス視点 → 技術視点  
- **Phase 4→5**: 技術視点 → 実装視点

### 3. 抽象度の管理
- 各Phaseで扱う抽象度レベルを明確に
- 上位の抽象度での決定が下位を制約
- 下位での発見が上位にフィードバック

## ⚠️ よくある混乱と対策

### 1. 視点の混在
**問題**: Phase 3でBC（技術境界）を定義しようとする
**対策**: Phase 3はビジネス視点に専念、技術はPhase 4で

### 2. 抽象度の飛躍
**問題**: VSから直接APIを設計しようとする
**対策**: 段階的に抽象度を下げる（VS→CL1→CL2→CL3→API）

### 3. 工程の逆行
**問題**: 実装してから価値を考える
**対策**: 必ず価値→能力→技術→実装の順序

## 📋 チェックリスト

### 現在の位置を確認
- [ ] どのPhaseにいるか明確か？
- [ ] どの視点で分析しているか明確か？
- [ ] どの抽象度レベルを扱っているか明確か？

### 成果物の妥当性を確認
- [ ] 現在のPhaseに適した視点か？
- [ ] 適切な抽象度レベルか？
- [ ] 前Phaseからの継承は明確か？

### 次への準備を確認
- [ ] 次Phaseでの視点切り替えの準備はできているか？
- [ ] 必要な情報は揃っているか？
- [ ] 抽象度の変化を理解しているか？

## 🎯 まとめ

**Parasol V5の分析フレームワーク**は：
1. **抽象度**：企業全体から画面単位まで段階的に詳細化
2. **視点**：ビジネス→技術→運用と段階的に切り替え
3. **工程**：価値定義から実装まで順序立てて進行

この3軸を常に意識することで、混乱なく体系的な分析・設計が可能になります。