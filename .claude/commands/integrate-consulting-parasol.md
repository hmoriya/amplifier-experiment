# コンサルティングツール × パラソルV4 統合コマンド

## Purpose
コンサルティングツールの既存ドメイン設計をパラソルV4フレームワークに統合し、Amplifierで実装コードを自動生成する

## Context
- コンサルティングツールには豊富なドメイン設計（パラソルV3）が存在
- パラソルV4のWHAT-HOW ZIGZAG構造を適用して体系化
- Amplifierの自動生成機能で実装まで完結

## Steps

### 1. 既存設計の分析とインポート
```
入力: コンサルティングツールの設計ディレクトリ
処理:
- design/parasol/配下の仕様書とテンプレートを解析
- docs/parasol/v3/mvp/のドメイン言語を抽出
- ビジネスケーパビリティ、オペレーション、ユースケースを識別
出力: 構造化された設計情報
```

### 2. パラソルV4レベルへのマッピング
```
CL1（戦略）への変換:
- ビジネスケーパビリティ → 戦略ケーパビリティ
- 価値提案の明確化
- ROIとKPIの設定

CL2（戦術）への変換:
- サービス定義 → マイクロサービス
- 境界コンテキストの明確化
- API設計の詳細化

CL3（オペレーション）への強化:
- ビジネスオペレーションのパターン分類
- CRUD/Workflow/Analytics/Collaborationへの分類
- 前提条件と事後条件の追加

L4（実装）への詳細化:
- ユースケース → ページ/コンポーネント
- APIエンドポイントの定義
- UIコンポーネントツリーの生成
```

### 3. WHAT-HOW ZIGZAG構造の適用
```
各レベルでの変換:
- 上位レベルのWHAT = 下位レベルのHOW
- 段階的詳細化の実施
- 価値トレーサビリティの確保
```

### 4. ドメインモデルの統合と拡張
```
エンティティの強化:
- V3の属性を保持
- V4の価値メトリクスを追加
- ケーパビリティとの関連付け

ビジネスルール:
- V3のルールを継承
- V4の価値ルールを追加
- 整合性の検証
```

### 5. コード生成
```
サービス層:
- TypeScript/NestJSでマイクロサービス生成
- ドメインエンティティとリポジトリ
- ビジネスロジックの実装

オペレーション層:
- パターンベースの処理フロー
- イベント駆動アーキテクチャ
- サガパターンの適用

ページ層:
- React/Next.jsコンポーネント
- APIクライアント
- 状態管理（Redux/Zustand）

テスト:
- ユニットテスト
- 統合テスト
- E2Eテスト
```

### 6. 検証とドキュメント生成
```
検証:
- ビジネスルールの保持確認
- 価値メトリクスの測定可能性
- アーキテクチャの健全性

ドキュメント:
- 統合設計書
- APIドキュメント（OpenAPI）
- アーキテクチャ決定記録（ADR）
```

## 実行例

```bash
# このコマンドを実行
/integrate-consulting-parasol

# 処理フロー:
1. コンサルティングツール設計を読み込み
2. パラソルV4構造にマッピング
3. Amplifierでコード生成
4. テスト実行
5. ドキュメント出力
```

## 出力

### ディレクトリ構造
```
projects/04-consulting-parasol-integration/
├── import/           # インポートされた設計
├── transformation/   # 変換結果
├── generation/      # 生成コード
│   ├── services/    # マイクロサービス
│   ├── operations/  # オペレーション実装
│   ├── pages/       # UIコンポーネント
│   └── tests/       # テストコード
└── integration/     # 統合成果物
```

### 主要成果物
- 統合設計書（Markdown）
- マイクロサービス実装（TypeScript）
- フロントエンド実装（React）
- テストスイート（Jest）
- APIドキュメント（OpenAPI）

## 期待される効果

### 生産性向上
- 設計から実装: 80%時間削減
- 手動コーディング: 70%削減
- ドキュメント作成: 90%自動化

### 品質向上
- ビジネスルール保証: 100%
- テストカバレッジ: 90%以上
- 設計と実装の一致: 100%

### 保守性向上
- 変更影響分析: 自動化
- リファクタリング: 安全実施
- 技術的負債: 50%削減

## 注意事項
- 大規模な統合の場合、段階的に実施することを推奨
- ビジネスルールの検証は人間によるレビューが必要
- 生成されたコードは必ずテストを実行してから使用