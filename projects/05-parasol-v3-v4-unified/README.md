# 05. ãƒ‘ãƒ©ã‚½ãƒ«V3.0 Ã— V4 çµ±åˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

## ğŸ”„ é‡è¦ãªç™ºè¦‹ï¼šV3.0ã®é€²åŒ–

### V2.0ã®èª¤è§£ï¼ˆå¤ã„ç†è§£ï¼‰
```
âŒ L3 Capability = Business Operationï¼ˆåŒã˜æŠ½è±¡åº¦ï¼‰
```

### V3.0ã®æ­£ã—ã„ç†è§£
```
âœ… L3 Capability = Whatï¼ˆèƒ½åŠ›ã®å®šç¾©ï¼‰
âœ… Business Operation = Howï¼ˆèƒ½åŠ›ã‚’å®Ÿç¾ã™ã‚‹æ“ä½œï¼‰
âœ… L3 âŠƒ Operationsï¼ˆè¦ªå­é–¢ä¿‚ï¼‰
```

### V4ã®WHAT-HOW ZIGZAGæ§‹é€ 
```
CL1 â†’ CL2 â†’ CL3 â†’ L4
ï¼ˆå„ãƒ¬ãƒ™ãƒ«ã®WHATãŒæ¬¡ãƒ¬ãƒ™ãƒ«ã®HOWã«ãªã‚‹ï¼‰
```

## ğŸ“Š çµ±åˆéšå±¤æ§‹é€ ï¼ˆV3.0 + V4 Best Practicesï¼‰

```
ä¼æ¥­ä¾¡å€¤å®šç¾©                        Why: ãªãœã‚„ã‚‹ã‹
  â†“
ValueStream                         What: ä¾¡å€¤ã®æµã‚Œ
  â†“
ValueStage                          What: ä¾¡å€¤æ®µéš
  â†“
L1 Capabilityï¼ˆå¤§åˆ†é¡ï¼‰             What: æˆ¦ç•¥çš„èƒ½åŠ›
  â†“
L2 Capabilityï¼ˆä¸­åˆ†é¡ï¼‰             What: æˆ¦è¡“çš„èƒ½åŠ›
  â†“ â†™ï¸ çµ±åˆãƒã‚¤ãƒ³ãƒˆ
BC (Bounded Context)                Why-What-How: å¢ƒç•Œã¥ã‘ã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
  â”œâ”€â”€ Why: ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤
  â”œâ”€â”€ What: L3èƒ½åŠ›ç¾¤
  â””â”€â”€ How: ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­è¨ˆ
    â†“
L3 Capabilityï¼ˆå°åˆ†é¡ï¼‰â­            What: å…·ä½“çš„èƒ½åŠ›
  â”œâ”€â”€ èƒ½åŠ›ã®å®šç¾©
  â””â”€â”€ Operations[]ï¼ˆè¤‡æ•°ã®æ“ä½œã‚’å«ã‚€ï¼‰
    â†“
Business Operation â­               How: æ“ä½œã®å®Ÿç¾æ–¹æ³•
  â”œâ”€â”€ ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆCRUD/Workflow/Analyticsï¼‰
  â””â”€â”€ UseCases[]
    â†“
UseCase/Page                        Implementation: å®Ÿè£…è©³ç´°
```

## ğŸ¯ V3.0ã¨V4ã®çµ±åˆãƒã‚¤ãƒ³ãƒˆ

### 1. L2 Capability vs Bounded Context

#### V3.0ã®æ´å¯Ÿ
- **L2 Capability**: ãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³åˆ†æï¼ˆEnterprise Architectureï¼‰
- **Bounded Context**: ãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—åˆ†æï¼ˆDomain-Driven Designï¼‰
- ä¸¡è€…ã¯ç•°ãªã‚‹åˆ†ææ‰‹æ³•ã®çµæœã§ã‚ã‚Šã€å¿…ãšã—ã‚‚1å¯¾1ã§ã¯ãªã„

#### V4ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
- CL2ï¼ˆæˆ¦è¡“ã‚±ãƒ¼ãƒ‘ãƒ“ãƒªãƒ†ã‚£ï¼‰â‰ˆ ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹
- å¢ƒç•Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚µãƒ¼ãƒ“ã‚¹å¢ƒç•Œã¨ã—ã¦åˆ©ç”¨

#### çµ±åˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
```yaml
analysis_integration:
  top_down:
    - L1 Capability â†’ L2 Capabilityï¼ˆEAè¦–ç‚¹ï¼‰
    - ãƒ“ã‚¸ãƒã‚¹æˆ¦ç•¥ã‹ã‚‰æ¼”ç¹¹çš„ã«å°å‡º

  bottom_up:
    - ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ†æ â†’ Bounded Contextï¼ˆDDDè¦–ç‚¹ï¼‰
    - ç¾å ´æ¥­å‹™ã‹ã‚‰å¸°ç´çš„ã«ç™ºè¦‹

  synthesis:
    - L2 âˆ© BC â†’ æœ€é©ãªã‚µãƒ¼ãƒ“ã‚¹å¢ƒç•Œ
    - ä¸¡æ–¹ã®è¦–ç‚¹ã‚’çµ±åˆã—ã¦æ±ºå®š
```

### 2. L3 Capability âŠƒ Operations

#### V3.0ã®æ§‹é€ 
```
L3 Capabilityï¼ˆWhatï¼‰
  â””â”€â”€ Operations[]ï¼ˆHowï¼‰
      â””â”€â”€ UseCases[]ï¼ˆImplementationï¼‰
```

#### V4ã®æ§‹é€ 
```
CL3 Business Operationï¼ˆWhat-Howçµ±åˆï¼‰
  â””â”€â”€ L4 Pages/UseCasesï¼ˆImplementationï¼‰
```

#### çµ±åˆæ§‹é€ 
```
L3 Capabilityï¼ˆèƒ½åŠ›å®šç¾©ï¼‰
  â”œâ”€â”€ What: å®Ÿç¾ã§ãã‚‹èƒ½åŠ›
  â”œâ”€â”€ Operations[]: èƒ½åŠ›ã‚’å®Ÿç¾ã™ã‚‹æ“ä½œç¾¤
  â”‚   â”œâ”€â”€ CRUD Operations
  â”‚   â”œâ”€â”€ Workflow Operations
  â”‚   â””â”€â”€ Analytics Operations
  â””â”€â”€ Metrics: èƒ½åŠ›ã®æ¸¬å®šæŒ‡æ¨™
```

## ğŸ“ æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
projects/05-parasol-v3-v4-unified/
â”œâ”€â”€ value-definition/           # ä¾¡å€¤å®šç¾©ï¼ˆWhyï¼‰
â”‚   â”œâ”€â”€ value-streams/             # ä¾¡å€¤ã®æµã‚Œ
â”‚   â”œâ”€â”€ value-stages/              # ä¾¡å€¤æ®µéš
â”‚   â””â”€â”€ value-metrics/             # ä¾¡å€¤æ¸¬å®š
â”‚
â”œâ”€â”€ capabilities/               # èƒ½åŠ›éšå±¤ï¼ˆWhatï¼‰
â”‚   â”œâ”€â”€ L1-strategic/              # æˆ¦ç•¥çš„èƒ½åŠ›
â”‚   â”œâ”€â”€ L2-tactical/               # æˆ¦è¡“çš„èƒ½åŠ›
â”‚   â””â”€â”€ L3-operational/            # é‹ç”¨èƒ½åŠ›
â”‚
â”œâ”€â”€ bounded-contexts/           # å¢ƒç•Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ {context-name}/
â”‚   â”‚   â”œâ”€â”€ WHY.md                # ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤
â”‚   â”‚   â”œâ”€â”€ WHAT.md               # L3èƒ½åŠ›ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ HOW.md                # å®Ÿç¾æ–¹æ³•
â”‚   â”‚   â”œâ”€â”€ domain/               # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ capabilities/         # L3èƒ½åŠ›è©³ç´°
â”‚   â”‚   â”‚   â””â”€â”€ {capability}/
â”‚   â”‚   â”‚       â”œâ”€â”€ definition.md
â”‚   â”‚   â”‚       â””â”€â”€ operations/   # æ“ä½œç¾¤
â”‚   â”‚   â””â”€â”€ api/                  # APIè¨­è¨ˆ
â”‚
â”œâ”€â”€ operations/                 # ãƒ“ã‚¸ãƒã‚¹æ“ä½œï¼ˆHowï¼‰
â”‚   â”œâ”€â”€ patterns/                  # æ“ä½œãƒ‘ã‚¿ãƒ¼ãƒ³
â”‚   â”‚   â”œâ”€â”€ crud/
â”‚   â”‚   â”œâ”€â”€ workflow/
â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â””â”€â”€ collaboration/
â”‚   â””â”€â”€ implementations/           # æ“ä½œå®Ÿè£…
â”‚
â””â”€â”€ pages-usecases/            # å®Ÿè£…è©³ç´°
    â”œâ”€â”€ pages/                     # UI/UX
    â””â”€â”€ use-cases/                 # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
```

## ğŸ”§ Amplifierã«ã‚ˆã‚‹è‡ªå‹•åŒ–æˆ¦ç•¥

### ãƒ¡ã‚¿èªçŸ¥ãƒ¬ã‚·ãƒ”ï¼šV3-V4çµ±åˆ

```markdown
# recipes/v3-v4-synthesis.md
## Purpose
V3.0ã®æ­£ã—ã„éšå±¤ç†è§£ã¨V4ã®WHAT-HOWæ§‹é€ ã‚’çµ±åˆ

## Steps
1. **ä¾¡å€¤åˆ†æ**
   - ValueStream/ValueStageã®å®šç¾©
   - ä¾¡å€¤ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®è¨­å®š

2. **èƒ½åŠ›éšå±¤ã®æ§‹ç¯‰**
   - L1 â†’ L2 â†’ L3ã®æ®µéšçš„è©³ç´°åŒ–
   - å„ãƒ¬ãƒ™ãƒ«ã§ã®Whatå®šç¾©

3. **å¢ƒç•Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®çµ±åˆ**
   - ãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³ï¼ˆL2ï¼‰ã¨ãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ï¼ˆDDDï¼‰ã®ç…§åˆ
   - æœ€é©ãªã‚µãƒ¼ãƒ“ã‚¹å¢ƒç•Œã®æ±ºå®š

4. **L3èƒ½åŠ›ã¨Operationã®ãƒãƒƒãƒ”ãƒ³ã‚°**
   - L3èƒ½åŠ›ï¼ˆWhatï¼‰ã®å®šç¾©
   - å„èƒ½åŠ›ã‚’å®Ÿç¾ã™ã‚‹Operationsï¼ˆHowï¼‰ã®è¨­è¨ˆ
   - æ“ä½œãƒ‘ã‚¿ãƒ¼ãƒ³ã®é©ç”¨

5. **å®Ÿè£…ç”Ÿæˆ**
   - ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ« â†’ ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚³ãƒ¼ãƒ‰
   - Operations â†’ APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
   - UseCases â†’ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

## Output
- çµ±åˆè¨­è¨ˆæ›¸
- èƒ½åŠ›-æ“ä½œãƒãƒˆãƒªã‚¯ã‚¹
- å®Ÿè£…ã‚³ãƒ¼ãƒ‰
```

## ğŸ¯ ä¸»è¦ãªæ”¹å–„ç‚¹

### 1. èƒ½åŠ›ã¨æ“ä½œã®æ˜ç¢ºãªåˆ†é›¢
- **L3 Capability**: ã€Œã€œã§ãã‚‹ã€ã¨ã„ã†æŠ½è±¡çš„ãªèƒ½åŠ›
- **Operation**: ã€Œã€œã™ã‚‹ã€ã¨ã„ã†å…·ä½“çš„ãªæ“ä½œ
- 1ã¤ã®èƒ½åŠ›ã¯è¤‡æ•°ã®æ“ä½œã§å®Ÿç¾ã•ã‚Œã‚‹

### 2. Why-What-Howã®è²¬å‹™æ˜ç¢ºåŒ–
```yaml
responsibility_matrix:
  Value: Whyï¼ˆãªãœå¿…è¦ã‹ï¼‰
  Capability: Whatï¼ˆä½•ãŒã§ãã‚‹ã‹ï¼‰
  Operation: Howï¼ˆã©ã†å®Ÿç¾ã™ã‚‹ã‹ï¼‰
  UseCase: Implementationï¼ˆå…·ä½“çš„å®Ÿè£…ï¼‰
```

### 3. ãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã¨ãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ã®çµ±åˆ
- EAçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨DDDçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®èåˆ
- æˆ¦ç•¥ã¨ç¾å ´ã®ä¸¡è¦–ç‚¹ã‹ã‚‰ã®æœ€é©åŒ–

## ğŸ“Š èƒ½åŠ›-æ“ä½œãƒãƒƒãƒ”ãƒ³ã‚°ä¾‹

### L3 Capability: ã‚¿ã‚¹ã‚¯ç®¡ç†èƒ½åŠ›

```yaml
capability:
  id: L3-task-management
  name: ã‚¿ã‚¹ã‚¯ç®¡ç†èƒ½åŠ›
  what: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¿ã‚¹ã‚¯ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹èƒ½åŠ›

  operations:
    - id: OP-create-task
      name: ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã™ã‚‹
      pattern: CRUD
      how: æ–°è¦ã‚¿ã‚¹ã‚¯ã®æƒ…å ±ã‚’ç™»éŒ²

    - id: OP-assign-task
      name: ã‚¿ã‚¹ã‚¯ã‚’å‰²ã‚Šå½“ã¦ã‚‹
      pattern: Workflow
      how: ã‚¿ã‚¹ã‚¯ã‚’ãƒ¡ãƒ³ãƒãƒ¼ã«å‰²ã‚Šå½“ã¦ã€é€šçŸ¥

    - id: OP-track-progress
      name: é€²æ—ã‚’è¿½è·¡ã™ã‚‹
      pattern: Analytics
      how: ã‚¿ã‚¹ã‚¯ã®é€²æ—ã‚’é›†è¨ˆãƒ»åˆ†æ

    - id: OP-collaborate-task
      name: ã‚¿ã‚¹ã‚¯ã§å”åƒã™ã‚‹
      pattern: Collaboration
      how: ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰ã§å”åƒ

  metrics:
    - ã‚¿ã‚¹ã‚¯å®Œäº†ç‡
    - å¹³å‡ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ 
    - ãƒªã‚½ãƒ¼ã‚¹ç¨¼åƒç‡
```

## ğŸš€ å®Ÿè£…æ‰‹é †

### Phase 1: ç¾çŠ¶åˆ†æ
```bash
# V3.0æ§‹é€ ã®åˆ†æ
amplifier analyze --source=consulting-tool --version=v3

# V4æ§‹é€ ã®åˆ†æ
amplifier analyze --source=parasol-v4 --version=v4
```

### Phase 2: çµ±åˆè¨­è¨ˆ
```bash
# èƒ½åŠ›éšå±¤ã®æ§‹ç¯‰
amplifier build-capabilities --method=hybrid

# å¢ƒç•Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æœ€é©åŒ–
amplifier optimize-contexts --top-down=L2 --bottom-up=DDD
```

### Phase 3: å®Ÿè£…ç”Ÿæˆ
```bash
# çµ±åˆæ§‹é€ ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
amplifier generate --framework=v3-v4-unified
```

## ğŸ“ˆ æœŸå¾…åŠ¹æœ

### è¨­è¨ˆå“è³ªã®å‘ä¸Š
- èƒ½åŠ›ã¨æ“ä½œã®æ˜ç¢ºãªåˆ†é›¢: 100%
- è²¬å‹™ã®æ˜ç¢ºåŒ–: å„å±¤ã§å˜ä¸€è²¬å‹™
- ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£: ä¾¡å€¤ã‹ã‚‰å®Ÿè£…ã¾ã§å®Œå…¨è¿½è·¡

### é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š
- é‡è¤‡ã®å‰Šæ¸›: 30%æ¸›
- è‡ªå‹•ç”Ÿæˆç‡: 80%
- ä¿å®ˆæ€§: 50%å‘ä¸Š

## âš ï¸ ç§»è¡Œæ™‚ã®æ³¨æ„ç‚¹

1. **æ—¢å­˜V2.0ã‹ã‚‰ã®ç§»è¡Œ**
   - L3 = Operationã¨ã„ã†èª¤è§£ã‚’ä¿®æ­£
   - èƒ½åŠ›å±¤ã¨æ“ä½œå±¤ã‚’åˆ†é›¢

2. **V4ã¨ã®çµ±åˆ**
   - CL3ã‚’Operationã¨ã—ã¦å†å®šç¾©
   - L3 Capabilityã‚’æ–°è¦å°å…¥

3. **å‘½åè¦å‰‡ã®çµ±ä¸€**
   - Capability: ã€Œã€œèƒ½åŠ›ã€
   - Operation: ã€Œã€œã™ã‚‹ã€
   - UseCase: ã€Œã€œã¨ã—ã¦ã€œã™ã‚‹ã€

ã“ã‚Œã«ã‚ˆã‚Šã€V3.0ã®æ­£ã—ã„ç†è§£ã¨V4ã®å„ªã‚ŒãŸæ§‹é€ ã‚’çµ±åˆã—ãŸã€ã‚ˆã‚Šå¼·åŠ›ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒå®Ÿç¾ã•ã‚Œã¾ã™ã€‚