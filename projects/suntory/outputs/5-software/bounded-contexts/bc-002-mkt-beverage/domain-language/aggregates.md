# Aggregates - BC-002 MKT-Beverage 飲料マーケティング

## 概要

本ドキュメントは、BC-002 MKT-Beverageの集約を定義する。

---

## BrandAggregate ブランド集約

| 項目 | 値 |
|------|-----|
| 日本語名 | ブランド集約 |
| ルートエンティティ | Brand |

### 説明

ブランドとその戦略・ガイドラインをまとめた集約。
ブランドアイデンティティの一貫性を保証する。

### 含むエンティティ

| エンティティ | 関係 | 説明 |
|--------------|------|------|
| Brand | Root | ブランド（ルート） |
| BrandStrategy | 1:N | ブランド戦略（履歴含む） |
| BrandGuideline | 1:N | ブランドガイドライン（履歴含む） |

### 含む値オブジェクト

| 値オブジェクト | 説明 |
|----------------|------|
| ColorPalette | カラーパレット |
| Typography | タイポグラフィ |
| Persona[] | ターゲットペルソナ |

### 整合性境界

```
┌─────────────────────────────────────────────────────────┐
│  BrandAggregate                                         │
│  ┌───────────────────────────────────────────────────┐ │
│  │  Brand (Root)                                     │ │
│  │    └── Persona[]                                  │ │
│  └───────────────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────────────┐ │
│  │  BrandStrategy[]                                  │ │
│  └───────────────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────────────┐ │
│  │  BrandGuideline[]                                 │ │
│  │    ├── ColorPalette                               │ │
│  │    └── Typography                                 │ │
│  └───────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 不変条件

1. ACTIVEブランドには有効な戦略が1つ存在する
2. ACTIVEブランドには公開済みガイドラインが存在する
3. 戦略・ガイドラインの履歴は完全に保持される

### 操作

| 操作 | 説明 |
|------|------|
| createBrand() | ブランドを作成する |
| updateStrategy() | 戦略を更新する |
| publishGuideline() | ガイドラインを公開する |
| archiveBrand() | ブランドをアーカイブする |

---

## CampaignAggregate キャンペーン集約

| 項目 | 値 |
|------|-----|
| 日本語名 | キャンペーン集約 |
| ルートエンティティ | Campaign |

### 説明

キャンペーンとそのパフォーマンスデータをまとめた集約。
キャンペーンのライフサイクルを管理する。

### 含むエンティティ

| エンティティ | 関係 | 説明 |
|--------------|------|------|
| Campaign | Root | キャンペーン（ルート） |
| CampaignPerformance | 1:N | パフォーマンスデータ（日次） |

### 含む値オブジェクト

| 値オブジェクト | 説明 |
|----------------|------|
| Budget | 予算 |
| MediaBreakdown | メディア配分 |
| KPITarget[] | KPI目標 |
| ROICalculation | ROI計算結果 |

### 整合性境界

```
┌─────────────────────────────────────────────────────────┐
│  CampaignAggregate                                      │
│  ┌───────────────────────────────────────────────────┐ │
│  │  Campaign (Root)                                  │ │
│  │    ├── Budget                                     │ │
│  │    ├── MediaBreakdown                             │ │
│  │    └── KPITarget[]                                │ │
│  └───────────────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────────────┐ │
│  │  CampaignPerformance[]                            │ │
│  └───────────────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────────────┐ │
│  │  ROICalculation (計算後)                          │ │
│  └───────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 不変条件

1. 予算は承認済み枠を超えない
2. KPIは最低1つ設定必須
3. 承認済みキャンペーンのみ実行可能
4. パフォーマンスデータは日次で一意

### 操作

| 操作 | 説明 |
|------|------|
| createCampaign() | キャンペーンを作成する |
| submitForApproval() | 承認申請する |
| approve() | 承認する |
| start() | 実行開始する |
| pause() | 一時停止する |
| resume() | 再開する |
| complete() | 完了する |
| recordPerformance() | パフォーマンスを記録する |
| calculateROI() | ROIを計算する |

---

## MarketResearchAggregate 市場調査集約

| 項目 | 値 |
|------|-----|
| 日本語名 | 市場調査集約 |
| ルートエンティティ | MarketResearch |

### 説明

市場調査プロジェクトと調査結果をまとめた集約。

### 含むエンティティ

| エンティティ | 関係 | 説明 |
|--------------|------|------|
| MarketResearch | Root | 市場調査（ルート） |

### 含む値オブジェクト

| 値オブジェクト | 説明 |
|----------------|------|
| Budget | 調査予算 |
| TrendData[] | トレンドデータ |
| MarketShare[] | 市場シェアデータ |

### 整合性境界

```
┌─────────────────────────────────────────────────────────┐
│  MarketResearchAggregate                                │
│  ┌───────────────────────────────────────────────────┐ │
│  │  MarketResearch (Root)                            │ │
│  │    └── Budget                                     │ │
│  └───────────────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────────────┐ │
│  │  調査結果データ                                   │ │
│  │    ├── TrendData[]                                │ │
│  │    └── MarketShare[]                              │ │
│  └───────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 不変条件

1. 完了した調査には結果データが存在する
2. サンプルサイズは統計的有意性を確保

### 操作

| 操作 | 説明 |
|------|------|
| createResearch() | 調査を作成する |
| startFieldwork() | フィールドワークを開始する |
| recordResults() | 結果を記録する |
| completeResearch() | 調査を完了する |

---

**作成日**: 2025-12-05
**更新日**: 2025-12-05
