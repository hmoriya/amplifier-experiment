# Page: page-003 水源登録画面 [WaterSourceRegistration]

## 概要

| 項目 | 値 |
|------|-----|
| ID | page-003 |
| 日本語名 | 水源登録画面 |
| 英語名 | WaterSourceRegistration |
| 定数名 | WATER_SOURCE_REGISTRATION |
| 関連UseCase | uc-003 水源登録 |
| ステータス | Draft |

## 目的

水源管理担当者が新規水源をシステムに登録する。

## ユーザー

- 水源管理担当者

## レイアウト

```
┌─────────────────────────────────────────────────────────────┐
│  ヘッダー: 水源登録                                         │
├─────────────────────────────────────────────────────────────┤
│  ┌────────────────────────┬────────────────────────────┐   │
│  │  地図パネル             │  入力フォーム              │   │
│  │  ┌──────────────────┐  │  水源名: [入力]            │   │
│  │  │                  │  │  種別: [地下水 ▼]          │   │
│  │  │   [地図表示]      │  │  発見日: [日付選択]        │   │
│  │  │                  │  │                            │   │
│  │  │   📍 ピン位置     │  │  住所: [自動取得表示]      │   │
│  │  │                  │  │  緯度: [表示]              │   │
│  │  │                  │  │  経度: [表示]              │   │
│  │  └──────────────────┘  │                            │   │
│  │  座標入力: [緯度] [経度]│  初回検査: [検査ID選択]    │   │
│  │  または地図クリック     │  検査結果: [合格/不合格]   │   │
│  └────────────────────────┴────────────────────────────┘   │
├─────────────────────────────────────────────────────────────┤
│  所有者情報（任意）                                         │
│  所有者: [入力] | 契約状況: [選択]                          │
├─────────────────────────────────────────────────────────────┤
│  備考: [テキストエリア]                                     │
├─────────────────────────────────────────────────────────────┤
│  フッター: [キャンセル] [登録]                              │
└─────────────────────────────────────────────────────────────┘
```

## コンポーネント

| コンポーネント | 種類 | 説明 |
|----------------|------|------|
| 地図 | Map (OSM/Google) | 位置選択用地図 |
| 位置マーカー | Marker | 選択位置表示 |
| 座標入力 | Input x 2 | 緯度・経度直接入力 |
| 水源名 | Input | 水源名入力 |
| 種別選択 | Dropdown | 水源種別選択 |
| 日付ピッカー | DatePicker | 発見日選択 |
| 検査ID選択 | Autocomplete | 初回検査選択 |
| 検査結果表示 | Badge | 合否表示 |

## データ表示

| データ項目 | ソース | 表示形式 |
|------------|--------|----------|
| 地図タイル | 外部GISサービス | 地図表示 |
| 住所 | Geocoding API | テキスト |
| 検査結果 | WaterQualityTest Entity | バッジ |

## アクション

| アクション | トリガー | 結果 |
|------------|----------|------|
| 地図クリック | マップクリック | 位置設定・住所取得 |
| 座標入力 | 入力確定 | 位置設定・住所取得 |
| 検査ID選択 | オートコンプリート | 検査結果表示 |
| 登録 | ボタンクリック | 重複チェック・登録 |
| キャンセル | ボタンクリック | 一覧に戻る |

## バリデーション

| フィールド | ルール | エラーメッセージ |
|------------|--------|------------------|
| 水源名 | 必須、一意 | 同名の水源が存在します |
| 位置情報 | 必須、日本国内 | 日本国内の位置を指定してください |
| 発見日 | 必須、過去日 | 有効な日付を入力してください |
| 初回検査 | 必須、合格 | 合格済みの検査を選択してください |

## 状態遷移

| 状態 | 説明 | 遷移先 |
|------|------|--------|
| 初期表示 | フォーム表示 | 入力中 |
| 入力中 | データ入力中 | 確認中 |
| 確認中 | 重複チェック中 | 登録完了 |
| 登録完了 | 登録成功 | 水源マップへ遷移 |

## アクセシビリティ

- 地図操作はキーボード対応
- 座標直接入力でマウス不要操作可
- フォーカス順序は論理的

---

**作成日**: 2025-12-05
**更新日**: 2025-12-05
**作成者**: AI Assistant
