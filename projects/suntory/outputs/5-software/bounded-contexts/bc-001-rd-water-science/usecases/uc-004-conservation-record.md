# UseCase: uc-004 涵養記録 [ConservationRecord]

## 概要

| 項目 | 値 |
|------|-----|
| ID | uc-004 |
| 日本語名 | 涵養記録 |
| 英語名 | ConservationRecord |
| 定数名 | CONSERVATION_RECORD |
| 関連Operation | op-004 涵養活動記録 |
| 関連Page | page-004 涵養活動記録画面 |
| ステータス | Draft |

## アクター

- **主アクター**: 水源管理担当者

## 概要説明

水源管理担当者が水源涵養活動（植樹、間伐、清掃等）を記録する。
活動実績を蓄積し、涵養面積の累計を更新する。

## 事前条件

- 担当者がシステムにログイン済みであること
- 対象水源が登録済みであること
- 涵養活動が実施済みであること

## 事後条件

- 涵養活動が記録されていること
- 添付ファイルが保存されていること
- 累計涵養面積が更新されていること

## 基本フロー

1. 担当者は「涵養活動記録画面」を開く
2. システムは記録フォームを表示する
3. 担当者は対象水源を選択する
4. システムは水源情報と過去の活動履歴を表示する
5. 担当者は活動種別（植樹/間伐/清掃/調査/その他）を選択する
6. 担当者は活動日を入力する
7. 担当者は活動面積（ha）を入力する
8. 担当者は参加人数を入力する
9. 担当者は活動内容を記述する
10. 担当者は写真・動画を添付する（任意）
11. 担当者は「登録」をクリックする
12. システムは活動を記録し、累計面積を更新する
13. システムは登録完了メッセージを表示する

## 代替フロー

### ALT-1: 複数日にまたがる活動

- 発生条件: 活動が複数日にわたる場合
- フロー:
  1. 担当者は活動期間（開始日〜終了日）を入力する
  2. システムは期間として記録する

## 例外フロー

### EXC-1: 重複記録

- 発生条件: 同一水源・同一日の記録が存在
- フロー:
  1. システムは既存記録を表示する
  2. 担当者は「追記」または「キャンセル」を選択する

## ビジネスルール

| ルールID | ルール | 説明 |
|----------|--------|------|
| BR-001 | 過去日のみ | 活動日は記録日以前 |
| BR-002 | 面積上限 | 1回の活動は最大100ha |
| BR-003 | 添付上限 | 写真・動画は最大10件 |
| BR-004 | 重複防止 | 同一水源・同一日の重複は警告 |

## UI要件

- 水源選択はドロップダウン+検索
- 活動履歴はタイムライン表示
- 写真はドラッグ&ドロップでアップロード
- 累計面積はリアルタイム更新表示

## 非機能要件

| 項目 | 要件 |
|------|------|
| パフォーマンス | ファイルアップロード10MB/30秒以内 |
| セキュリティ | 写真の位置情報は自動除去 |
| 可用性 | 業務時間内99.9%稼働 |

---

**作成日**: 2025-12-05
**更新日**: 2025-12-05
**作成者**: AI Assistant
