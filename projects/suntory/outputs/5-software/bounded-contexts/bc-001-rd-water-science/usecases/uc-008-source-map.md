# UseCase: uc-008 水源マップ [SourceMap]

## 概要

| 項目 | 値 |
|------|-----|
| ID | uc-008 |
| 日本語名 | 水源マップ |
| 英語名 | SourceMap |
| 定数名 | SOURCE_MAP |
| 関連Operation | op-003, op-004 |
| 関連Page | page-008 水源マップ |
| ステータス | Draft |

## アクター

- **主アクター**: 水源管理担当者、経営層

## 概要説明

水源管理担当者や経営層が全国の水源をマップ上で確認する。
水源の状態、涵養活動状況、水質履歴を視覚的に把握する。

## 事前条件

- ユーザーがシステムにログイン済みであること
- 閲覧権限を持っていること

## 事後条件

- なし（参照のみ）

## 基本フロー

1. ユーザーは「水源マップ」を開く
2. システムは日本地図と水源マーカーを表示する
3. ユーザーは地図をズーム/パンして水源を確認する
4. システムは水源種別ごとにマーカーを色分け表示する
5. ユーザーは水源マーカーをクリックする
6. システムはポップアップで水源サマリーを表示する
   - 水源名
   - 種別
   - 最新水質検査結果
   - 累計涵養面積
7. ユーザーは「詳細を見る」をクリックする
8. システムは水源詳細画面へ遷移する

## 代替フロー

### ALT-1: フィルタ表示

- 発生条件: 特定条件の水源のみ表示したい場合
- フロー:
  1. ユーザーはフィルタ（種別、状態、地域）を設定する
  2. システムは条件に合う水源のみ表示する

### ALT-2: 涵養活動表示

- 発生条件: 涵養活動状況を確認したい場合
- フロー:
  1. ユーザーは「涵養活動レイヤー」を有効にする
  2. システムは涵養面積をヒートマップで表示する

## 例外フロー

### EXC-1: 位置情報エラー

- 発生条件: 水源の位置情報が不正
- フロー:
  1. システムはエラーマーカーで表示する
  2. 管理者は位置情報の修正を行う

## ビジネスルール

| ルールID | ルール | 説明 |
|----------|--------|------|
| BR-001 | 機密レベル | 詳細位置は権限に応じて表示制御 |
| BR-002 | 色分け | 種別・状態で一貫した色分け |
| BR-003 | 自動更新 | データは1時間間隔で更新 |
| BR-004 | 外部公開用 | 匿名化版マップを別途提供 |

## UI要件

- 地図はOpenStreetMapまたはGoogle Maps
- マーカーは水源種別でアイコン・色を変更
- ポップアップは軽量表示（詳細は別画面）
- クラスタリング表示（ズームアウト時）
- レスポンシブ対応（タブレット可）

## 非機能要件

| 項目 | 要件 |
|------|------|
| パフォーマンス | 初期表示3秒以内、マーカー100件/秒描画 |
| セキュリティ | 位置情報は機密、権限に応じた表示制御 |
| 可用性 | 業務時間内99.9%稼働 |

---

**作成日**: 2025-12-05
**更新日**: 2025-12-05
**作成者**: AI Assistant
