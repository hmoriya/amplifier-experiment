# UseCase: uc-001 水質検査 [WaterQualityTest]

## 概要

| 項目 | 値 |
|------|-----|
| ID | uc-001 |
| 日本語名 | 水質検査 |
| 英語名 | WaterQualityTest |
| 定数名 | WATER_QUALITY_TEST |
| 関連Operation | op-001 水質検査実施 |
| 関連Page | page-001 水質検査画面 |
| ステータス | Draft |

## アクター

- **主アクター**: 水質分析担当者
- **副アクター**: 品質管理責任者（不合格時）

## 概要説明

水質分析担当者が水サンプルの品質検査を実施し、結果を記録する。
検査結果に基づき合否判定を行い、不合格の場合は関係者に通知する。

## 事前条件

- 水サンプルが採取され、サンプルIDが発行されていること
- 担当者がシステムにログイン済みであること
- 対象水源が登録済みであること

## 事後条件

- 検査結果がシステムに記録されていること
- 合否判定が確定していること
- 不合格の場合、品質管理責任者に通知されていること

## 基本フロー

1. 担当者は「水質検査画面」を開く
2. システムは検査入力フォームを表示する
3. 担当者はサンプルIDをスキャンまたは入力する
4. システムはサンプル情報と水源情報を表示する
5. 担当者は製品カテゴリを選択する
6. システムは適用される品質基準と検査項目を表示する
7. 担当者は各検査項目の測定値を入力する
8. システムはリアルタイムで基準値との照合結果を表示する
9. 担当者は全項目の入力を完了し「検査完了」をクリックする
10. システムは合否判定を確定し、結果を保存する
11. システムは検査完了メッセージと検査IDを表示する

## 代替フロー

### ALT-1: サンプル期限切れ

- 発生条件: サンプル採取から48時間以上経過
- フロー:
  1. システムは警告メッセージを表示する
  2. 担当者は「期限切れとして記録」または「キャンセル」を選択する
  3. 「期限切れとして記録」の場合、結果はINVALIDとして保存される

### ALT-2: 要再検査判定

- 発生条件: 測定値が基準値の誤差範囲内
- フロー:
  1. システムは「RETEST」判定と該当項目を表示する
  2. 担当者は再検査予定日を入力する
  3. システムは再検査タスクを登録する

## 例外フロー

### EXC-1: 水源未登録

- 発生条件: 入力したサンプルの水源が未登録
- フロー:
  1. システムはエラーメッセージを表示する
  2. 担当者は水源登録へ遷移するか、キャンセルする

### EXC-2: 基準未設定

- 発生条件: 選択した製品カテゴリの品質基準が未設定
- フロー:
  1. システムはエラーメッセージを表示する
  2. 担当者は品質管理責任者に連絡する

## ビジネスルール

| ルールID | ルール | 説明 |
|----------|--------|------|
| BR-001 | 必須項目検査 | 製品カテゴリの必須検査項目はすべて入力必須 |
| BR-002 | 48時間ルール | サンプル採取から48時間以内に検査開始 |
| BR-003 | 単一不合格ルール | 1項目でも基準外ならFAIL |
| BR-004 | 監査ログ | 全入力操作は監査ログに記録 |

## UI要件

- サンプルIDはバーコードスキャン対応
- 基準値は入力欄の横に表示
- 基準外の値は赤色でハイライト
- 入力途中でも一時保存可能

## 非機能要件

| 項目 | 要件 |
|------|------|
| パフォーマンス | 画面遷移2秒以内、保存処理3秒以内 |
| セキュリティ | 検査結果の改ざん防止、監査ログ必須 |
| 可用性 | 業務時間内99.9%稼働 |

---

**作成日**: 2025-12-05
**更新日**: 2025-12-05
**作成者**: AI Assistant
